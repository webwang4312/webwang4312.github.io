<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="uenc Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="uenc Blog Atom Feed"><title data-react-helmet="true">开放接口 | uenc</title><meta data-react-helmet="true" property="og:url" content="https://your-docusaurus-test-site.com/开发者/开放接口"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="开放接口 | uenc"><meta data-react-helmet="true" name="description" content="UENC主网提供了protobuf接口和jsonrpc接口，供开发者使用。"><meta data-react-helmet="true" property="og:description" content="UENC主网提供了protobuf接口和jsonrpc接口，供开发者使用。"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://your-docusaurus-test-site.com/开发者/开放接口"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/开发者/开放接口" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/开发者/开放接口" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.dd2f9896.css">
<link rel="preload" href="/assets/js/runtime~main.809ca3ce.js" as="script">
<link rel="preload" href="/assets/js/main.49f51e15.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">uenc</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/Docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">EN</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">uenc</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/facebook/Docusaurus" target="_blank" rel="noopener noreferrer" class="menu__link">EN</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">概述</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">了解UENC</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/了解UENC/UENC是什么">UENC是什么</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/了解UENC/什么是质押">什么是质押</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/了解UENC/打包费">打包费</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/了解UENC/DPOW共识算法">DPOW共识算法</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/了解UENC/公网节点">公网节点</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">UENC节点</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/UENC节点/节点部署">节点部署</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/UENC节点/使用节点">使用节点</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">开发者</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/开发者/UENC开发者">UENC开发者</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/开发者/开放接口">开放接口</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">钱包</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/钱包/Fastoken钱包">Fastoken钱包</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/钱包/其他钱包">其他钱包</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">社区讨论</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/社区讨论/常见问题">常见问题</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">开放接口</h1></header><div class="markdown"><p>UENC主网提供了protobuf接口和jsonrpc接口，供开发者使用。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="protobuf接口"></a>Protobuf接口<a class="hash-link" href="#protobuf接口" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="请求数据规范"></a>请求数据规范<a class="hash-link" href="#请求数据规范" title="Direct link to heading">#</a></h4><ol><li><p>所有网络请求需按照协议规范（数据格式）将数据组织好后，使用socket连接方式发送到主网节点（端口为11187），当主网节点收到请求后将按照同样协议规范（数据格式）返回给请求方，请求方需自行解析相关数据获得接口返回信息。</p></li><li><p>请求协议中部分信息是以protobuf方式进行封装，封装后序列化后填充请求协议中进行发送。一般请求协议的名称以Req结尾，发送到主网后，主网后会返回Ack结尾的protobuf数据体进行回应。例如请求获得余额的子协议接口为GetAmountReq，则主网服务器收到该请求后的回应数据体为GetAmountAck。</p></li><li><p>请求协议的数据格式如下：</p><table><thead><tr><th align="center">协议总长度</th><th align="center">通用协议</th><th align="center">校验和</th><th align="center">标志位</th><th align="center">结束标志</th></tr></thead><tbody><tr><td align="center">4bytes</td><td align="center">序列化后的字符串</td><td align="center">4bytes</td><td align="center">4bytes</td><td align="center">4bytes</td></tr></tbody></table><ul><li><p>协议总长度</p><ul><li><p>该字段4字节，记录接下来的 <strong>通用协议</strong> + <strong>校验和</strong> + <strong>标志位</strong> + <strong>结束标记</strong>的总长度。假设通用协议100个字节，校验和4个字节，标志位4个字节，结束标记4个字节，则总长度为100 + 4 + 4 + 4 = 112字节。</p><ul><li><p>通用协议</p></li><li><p>通用协议为profobuf格式，原型如下：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message CommonMsg</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string type = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32 encrypt = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32 compress = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bytes data = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">type</td><td align="center">子协议类型名称，根据实际业务需要填充接口名称，如”GetAmountReq”</td></tr><tr><td align="center">encrypt</td><td align="center">是否加密，1为加密，0为不加密，默认为0</td></tr><tr><td align="center">compress</td><td align="center">是否压缩，1为压缩，0为不压缩，默认为0</td></tr><tr><td align="center">data</td><td align="center">子协议接口protobuf数据体序列化后的数据,请求时需要将子协议接口的protobuf类型数据序列化后，填充到data中后进行发送。</td></tr></tbody></table></li></ul></li></ul></li></ul></li></ol><ul><li><p>标志位</p><ul><li><p>标志位长度为4字节，结构如下：</p><table><thead><tr><th align="center">3</th><th align="center">2</th><th align="center">1</th><th align="center">0</th></tr></thead><tbody><tr><td align="center">保留</td><td align="center">保留</td><td align="center">保留</td><td align="center">优先级</td></tr></tbody></table><p>优先级：默认为0。
</p></li></ul></li><li><p>校验和</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  - 校验和长度为4字节，是通用协议序列化后，通过Adler32算法计算出来的校验和信息。</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>结束标志</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  - 结束标记长度为4字节，其内容为7777777。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  4. 将请求协议发送到主网后，主网也按照请求协议格式封装回传信息传送给请求方，请求方收到信息后：</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol><li>根据协议总长度获得完整回传信息。</li><li>根据协议总长度获得通用协议、校验和、标志位以及结束标志。</li><li>根据校验和判断通用协议是否完整。</li><li>通过反序列化通用协议，获取子协议（接口）名称和子协议（接口）的数据内容。</li><li>根据通用协议中的压缩和加密字段，确定是否对子协议（接口）的数据内容进行解压缩或解密操作。</li><li>将子协议的数据内容按照子协议的protobuf格式进行反序列化，获得完整的子协议（接口）请求内容。</li></ol></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="接口介绍"></a>接口介绍<a class="hash-link" href="#接口介绍" title="Direct link to heading">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="一、设置设备密码接口（setdevpasswordreq）"></a>一、设置设备密码接口（SetDevPasswordReq）<a class="hash-link" href="#一、设置设备密码接口（setdevpasswordreq）" title="Direct link to heading">#</a></h5><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message SetDevPasswordReq </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string old_pass = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string new_pass = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">old_pass</td><td align="center">旧密码</td></tr><tr><td align="center">new_pass</td><td align="center">新密码</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message SetDevPasswordAck </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sint32 code = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string description = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">0成功; -1参数错误; -2 密码不能为空; -3旧密码非法（特殊字符或长度超过8个字节）; -4 新密码非法（特殊字符或长度超过8个字节）; -5 新旧密码不能相同; -6 旧密码验证不正确; -7 未知错误</td></tr><tr><td align="center">description</td><td align="center">返回值的文字描述</td></tr></tbody></table></li><li><p>代码示例</p></li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 设置设备密码接口（SetDevPasswordReq）</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">SetDevPasswordRequest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 固定参数(参数可修改)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    HOST </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;192.168.1.141&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PORT </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11187</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    VERSION </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1_1.3_p&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    OLD_PASS </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11111111</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    NEW_PASS </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">12345678</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 创建socket请求</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">AF_INET</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SOCK_STREAM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ADDR </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">HOST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> PORT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 连接服务器</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ADDR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 发送数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SetDevPasswordReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">old_pass </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">OLD_PASS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">new_pass </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">NEW_PASS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">CommonMsg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">type</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;SetDevPasswordReq&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 序列化</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sendData </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获取协议总长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len_ </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;i%dsIi&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    end_flag </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7777777</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 拼接消息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Splicing_String </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> struct</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">pack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> data_len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> adler32</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> end_flag</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">send</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Splicing_String</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    target </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SetDevPasswordAck</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0.1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 接收前四个字节，解析数据长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        test </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">from_bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> byteorder</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;little&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 根据数据长度再次接收数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 将接收到的数据的最后8字节删除,最后8字节的内容是校验和、end_flag</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply3 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> reply2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 反序列化reply3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 格式化数据，并转为字典格式</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        message_SetDevPasswordAck </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_to_dict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        json_output </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">message_SetDevPasswordAck</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> indent</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ensure_ascii</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">False</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 返回json数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> json_output</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="二、设置矿工费请求接口（setservicefeereq）"></a>二、设置矿工费请求接口（SetServiceFeeReq）<a class="hash-link" href="#二、设置矿工费请求接口（setservicefeereq）" title="Direct link to heading">#</a></h5><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message SetServiceFeeReq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;         </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string password = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string service_fee = 3;                 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">password</td><td align="center">节点密码</td></tr><tr><td align="center">service_fee</td><td align="center">设定值</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message SetServiceFeeAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;             </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sint32 code = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string description = 3;                 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">0成功; -6 密码错误; -7 滑动条数值显示错误</td></tr><tr><td align="center">description</td><td align="center">返回值的文字描述</td></tr></tbody></table></li><li><p>代码示例</p></li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 设置矿工费请求接口（SetServiceFeeReq）</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">SetServiceFeeRequest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 固定参数(参数可修改)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    HOST </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;192.168.1.141&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PORT </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11187</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    VERSION </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1_1.3_p&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PASSWORD </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">12345678</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    SERVICE_FEE </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0.01</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 创建socket请求</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">AF_INET</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SOCK_STREAM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ADDR </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">HOST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> PORT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 连接服务器</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ADDR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 发送数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SetServiceFeeReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">password </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">PASSWORD</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">service_fee </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">SERVICE_FEE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len_ </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">service_fee</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sum_ </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">58</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> data_len_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len_ </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;i%dsIi&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token plain"> sum_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">CommonMsg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">type</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;SetServiceFeeReq&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 序列化</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sendData </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获取协议总长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    end_flag </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7777777</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 拼接消息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Splicing_String </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> struct</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">pack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> data_len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> adler32</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> end_flag</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">send</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Splicing_String</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    target </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SetServiceFeeAck</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0.1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 接收前四个字节，解析数据长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        test </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">from_bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> byteorder</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;little&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 根据数据长度再次接收数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 将接收到的数据的最后8字节删除,最后8字节的内容是校验和、end_flag</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply3 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> reply2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 反序列化reply3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 格式化数据，并转为字典格式</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        message_SetServiceFeeAck </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_to_dict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        json_output </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">message_SetServiceFeeAck</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> indent</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ensure_ascii</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">False</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 返回json数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> json_output</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="四、获取账户余额接口（getamountreq）"></a>四、获取账户余额接口（GetAmountReq）<a class="hash-link" href="#四、获取账户余额接口（getamountreq）" title="Direct link to heading">#</a></h5><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetAmountReq </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string address = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">address</td><td align="center">钱包地址</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetAmountAck </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sint32 code = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string description = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string address = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string balance = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">返回0为成功, -1为钱包地址不可用</td></tr><tr><td align="center">description</td><td align="center">返回值的文字描述</td></tr><tr><td align="center">address</td><td align="center">钱包地址</td></tr><tr><td align="center">balance</td><td align="center">余额</td></tr></tbody></table></li><li><p>代码示例</p></li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获取账户余额接口（GetAmountReq）</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">GetAmountRequest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 固定参数(参数可修改)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    HOST </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;192.168.1.141&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PORT </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11187</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    VERSION </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1_1.3_p&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ADDRESS </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;13C4UmhB7tKGdXiJrp2GKsJtmCoJeqGJQz&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 创建socket请求</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">AF_INET</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SOCK_STREAM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ADDR </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">HOST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> PORT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 连接服务器</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ADDR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 发送数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetAmountReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">address </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ADDRESS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">CommonMsg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">type</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;GetAmountReq&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 序列化</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sendData </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获取协议总长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len_ </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;i%dsIi&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    end_flag </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7777777</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 结束标志位</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 拼接消息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Splicing_String </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> struct</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">pack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> data_len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> adler32</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> end_flag</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">send</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Splicing_String</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    target </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetAmountAck</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 接收前四个字节，解析数据长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        test </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">from_bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> byteorder</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;little&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 根据数据长度再次接收数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 将接收到的数据的最后8字节删除,最后8字节的内容是校验和、end_flag</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply3 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> reply2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 反序列化reply3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 格式化数据，并转为字典格式</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        message_GetAmountAck </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_to_dict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        json_output </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">message_GetAmountAck</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> indent</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ensure_ascii</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">False</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 返回json数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> json_output</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="五、获取特定节点打包费接口（getpacketfeereq）已废弃deprecated"></a>五、获取特定节点打包费接口（GetPacketFeeReq）已废弃deprecated<a class="hash-link" href="#五、获取特定节点打包费接口（getpacketfeereq）已废弃deprecated" title="Direct link to heading">#</a></h5><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetPacketFeeReq </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;                 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string password = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string public_net_ip = 3;                       </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">password</td><td align="center">节点密码</td></tr><tr><td align="center">public_net_ip</td><td align="center">当前连接的的公网的ip</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetPacketFeeAck </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sint32 code = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string description = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string packet_fee = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">0成功</td></tr><tr><td align="center">description</td><td align="center">返回值的文字描述</td></tr><tr><td align="center">packet_fee</td><td align="center">打包费</td></tr></tbody></table></li><li><p>代码示例</p></li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获取特定节点打包费接口（GetPacketFeeReq）</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">GetPacketFeeRequest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 固定参数(参数可修改)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    HOST </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;192.168.1.141&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PORT </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11187</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    VERSION </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1_1.3_p&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PASSWORD </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">12345678</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PUBLIC_NET_IP </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;47.108.52.94&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 创建socket请求</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">AF_INET</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SOCK_STREAM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ADDR </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">HOST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> PORT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 连接服务器</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ADDR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 发送数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetPacketFeeReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">password </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">PASSWORD</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">public_net_ip </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> PUBLIC_NET_IP</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">CommonMsg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">type</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;GetPacketFeeReq&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 序列化</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sendData </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获取协议总长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len_ </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;i%dsIi&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    end_flag </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7777777</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 拼接消息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Splicing_String </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> struct</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">pack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> data_len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> adler32</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> end_flag</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">send</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Splicing_String</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    target </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetPacketFeeAck</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0.1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 接收前四个字节，解析数据长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        test </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">from_bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> byteorder</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;little&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 根据数据长度再次接收数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 将接收到的数据的最后8字节删除,最后8字节的内容是校验和、end_flag</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply3 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> reply2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 反序列化reply3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 格式化数据，并转为字典格式</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        message_GetPacketFeeReq </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_to_dict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        json_output </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">message_GetPacketFeeReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> indent</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ensure_ascii</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">False</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 返回json数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> json_output</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="六、获得全网节点矿费接口（getnodeservicefeereq）"></a>六、获得全网节点矿费接口（GetNodeServiceFeeReq）<a class="hash-link" href="#六、获得全网节点矿费接口（getnodeservicefeereq）" title="Direct link to heading">#</a></h5><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetNodeServiceFeeReq </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version                          = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本，目前暂时可为空</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetNodeServiceFeeAck </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version                          = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sint32 code                             = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string description                      = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated ServiceFee service_fee_info    = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message ServiceFee</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string max_fee      = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string min_fee      = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string service_fee  = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string avg_fee      = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本，目前暂时可为空</td></tr><tr><td align="center">code</td><td align="center">0成功</td></tr><tr><td align="center">description</td><td align="center">返回值的文字描述</td></tr><tr><td align="center">service_fee_info</td><td align="center">节点矿费信息结构体数组</td></tr><tr><td align="center">max_fee</td><td align="center">前一百块交易最大值</td></tr><tr><td align="center">min_fee</td><td align="center">前一百块交易最小值</td></tr><tr><td align="center">service_fee</td><td align="center">矿工设置的矿费</td></tr><tr><td align="center">avg_fee</td><td align="center">前一百块交易平均值</td></tr></tbody></table></li></ol><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="七、根据密码获取钱包地址接口（getdevpasswordreq）"></a>七、根据密码获取钱包地址接口（GetDevPasswordReq）<a class="hash-link" href="#七、根据密码获取钱包地址接口（getdevpasswordreq）" title="Direct link to heading">#</a></h5><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetDevPasswordReq </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string password = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">password</td><td align="center">密码</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetDevPasswordAck </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sint32 code = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string description = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string address = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">0成功; -2 密码错误</td></tr><tr><td align="center">description</td><td align="center">返回值的文字描述</td></tr><tr><td align="center">address</td><td align="center">钱包地址</td></tr></tbody></table></li></ol><p>3.代码示例</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 根据密码获取钱包地址接口（GetDevPasswordReq）</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">GetDevPasswordRequest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 固定参数(参数可修改)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    HOST </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;192.168.1.141&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PORT </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11187</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    VERSION </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1_1.3_p&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PASSWODR </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">12345678</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 创建socket请求</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">AF_INET</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SOCK_STREAM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ADDR </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">HOST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> PORT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 连接服务器</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ADDR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 发送数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetDevPasswordReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">password </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">PASSWODR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">CommonMsg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">type</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;GetDevPasswordReq&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 序列化</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sendData </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获取协议总长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len_ </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;i%dsIi&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    end_flag </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7777777</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 拼接消息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Splicing_String </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> struct</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">pack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> data_len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> adler32</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> end_flag</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">send</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Splicing_String</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    target </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetDevPasswordAck</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0.1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 接收前四个字节，解析数据长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        test </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">from_bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> byteorder</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;little&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 根据数据长度再次接收数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 将接收到的数据的最后8字节删除,最后8字节的内容是校验和、end_flag</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply3 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> reply2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 反序列化reply3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 格式化数据，并转为字典格式</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        message_GetDevPasswordReq </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_to_dict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        json_output </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">message_GetDevPasswordReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> indent</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ensure_ascii</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">False</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 返回json数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> json_output</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="八、从服务器端获得客户端相关信息接口（getclientinforeq）"></a>八、从服务器端获得客户端相关信息接口（GetClientInfoReq）<a class="hash-link" href="#八、从服务器端获得客户端相关信息接口（getclientinforeq）" title="Direct link to heading">#</a></h5><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetClientInfoReq </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version          = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    DeviceType phone_type   = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    DeviceLang phone_lang   = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string phone_version    = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本，目前暂时可为空</td></tr><tr><td align="center">phone_type</td><td align="center">客户端类型</td></tr><tr><td align="center">phone_lang</td><td align="center">所选语言</td></tr><tr><td align="center">phone_version</td><td align="center">客户端所用版本</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetClientInfoAck </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version      = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sint32 code         = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string description  = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string min_version  = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string is_update    = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string ver          = 6;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string desc         = 7;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string dl           = 8 ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">enum DeviceType {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PC                  = 0;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    iOS                 = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Android             = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">enum DeviceLang {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ZH_CN               = 0;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    EN_US               = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本，目前暂时可为空</td></tr><tr><td align="center">code</td><td align="center">-1,参数错误; -2,获得客户端信息错误，此情况是需要更新但是获得客户端下载信息是失败; 0 操作成功，但不需要更新，isUpdate为0，无客户端下载信息; 1 操作成功，包含所有字段信息</td></tr><tr><td align="center">description</td><td align="center">返回值的文字描述</td></tr><tr><td align="center">min_version</td><td align="center">服务器程序所支持的最小客户端版本</td></tr><tr><td align="center">is_update</td><td align="center">是否升级, 1为需要升级, 0为不需要升级</td></tr><tr><td align="center">ver</td><td align="center">所需下载客户端的版本</td></tr><tr><td align="center">desc</td><td align="center">所需下载客户端的描述信息</td></tr><tr><td align="center">dl</td><td align="center">所需下载客户端的Url</td></tr><tr><td align="center">PC</td><td align="center">pc端</td></tr><tr><td align="center">iOS</td><td align="center">ios端</td></tr><tr><td align="center">Android</td><td align="center">android端</td></tr><tr><td align="center">ZH_CN</td><td align="center">中文</td></tr><tr><td align="center">EN_US</td><td align="center">英文</td></tr></tbody></table></li></ol><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="九、获取公网节点信息接口（getnodeinforeq）"></a>九、获取公网节点信息接口（GetNodeInfoReq）<a class="hash-link" href="#九、获取公网节点信息接口（getnodeinforeq）" title="Direct link to heading">#</a></h5><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetNodeInfoReq </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetNodeInfoAck </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version                  = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sint32 code                     = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string description              = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated NodeList node_list     = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message NodeList </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated NodeInfos node_info    = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string local                    = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message NodeInfos </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string enable                   = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string ip                       = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string name                     = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string port                     = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string price                    = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本，目前暂时可为空</td></tr><tr><td align="center">code</td><td align="center">0成功；-1获取失败</td></tr><tr><td align="center">description</td><td align="center">返回值的文字描述</td></tr><tr><td align="center">node_list</td><td align="center">节点信息结构体数组</td></tr><tr><td align="center">node_info</td><td align="center">节点信息结构体</td></tr><tr><td align="center">local</td><td align="center">地区</td></tr><tr><td align="center">enable</td><td align="center">节点是否可用</td></tr><tr><td align="center">ip</td><td align="center">节点ip</td></tr><tr><td align="center">name</td><td align="center">节点名称</td></tr><tr><td align="center">port</td><td align="center">节点端口</td></tr><tr><td align="center">price</td><td align="center">废弃</td></tr></tbody></table></li></ol><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="十、获取平均手续费、同步状态等信息接口（getserviceinforeq）"></a>十、获取平均手续费、同步状态等信息接口（GetServiceInfoReq）<a class="hash-link" href="#十、获取平均手续费、同步状态等信息接口（getserviceinforeq）" title="Direct link to heading">#</a></h5><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetServiceInfoReq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string password = 2;    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string public_net_ip = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bool is_show = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 sequence_number = 5;                       </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">password</td><td align="center">手机端密码(暂时不需要传)</td></tr><tr><td align="center">public_net_ip</td><td align="center">公网节点IP</td></tr><tr><td align="center">is_show</td><td align="center">非直连(通过节点)公网节点 需要传true(club可忽视此参数)</td></tr><tr><td align="center">sequence_number</td><td align="center">请求的序列号 (请求的时候传入什么值就会返回什么值)</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetServiceInfoAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sint32 code = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string description = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string mac_hash = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string device_version = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated ServiceFee service_fee_info = 6;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    enum SyncStatus</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        TRUE = 0;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        FALSE = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        FAIL = -1;  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    SyncStatus is_sync = 7;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sint32 height = 8; //节点高度</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 sequence = 9; //回应的序列号</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message ServiceFee</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string max_fee = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string min_fee = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string service_fee = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string avg_fee = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">0为成功; -1 版本错误返回值的文字描述; -404 连接公网超时</td></tr><tr><td align="center">description</td><td align="center">返回描述</td></tr><tr><td align="center">mac_hash</td><td align="center">废弃</td></tr><tr><td align="center">device_version</td><td align="center">节点程序版本</td></tr><tr><td align="center">service_fee_info</td><td align="center">ServiceFee 手续费结构体</td></tr><tr><td align="center">is_sync</td><td align="center">SyncStatus 是否同步枚举值</td></tr><tr><td align="center">SyncStatus</td><td align="center">0 与主网同步; 1 与主网未同步; -1 获得主网信息失败</td></tr><tr><td align="center">max_fee</td><td align="center">前一百块交易最大值</td></tr><tr><td align="center">min_fee</td><td align="center">前一百块交易最小值</td></tr><tr><td align="center">service_fee</td><td align="center">矿工设置的矿费</td></tr><tr><td align="center">avg_fee</td><td align="center">前一百块交易平均值</td></tr><tr><td align="center">SyncStatus</td><td align="center">0 节点与主网已同步; 1 节点与主网未同步; -1 获取主网信息失败</td></tr><tr><td align="center">height</td><td align="center">节点高度或者公网高度(请求的是节点就是节点高度，请求的是公网就是公网高度)</td></tr><tr><td align="center">sequence</td><td align="center">请求端传入的序列号(请求端传入什么数据返回什么数据)</td></tr></tbody></table></li><li><p>代码示例</p></li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获取平均手续费、同步状态等信息接口（GetServiceInfoReq）</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">GetServiceInfoRequest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 固定参数(参数可修改)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    HOST </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;192.168.1.141&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PORT </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11187</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    VERSION </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1_1.3_p&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PASSWORD </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">12345678</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    IS_SHOW </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    SEQUENCE_NUMBER </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 创建socket请求</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">AF_INET</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SOCK_STREAM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ADDR </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">HOST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> PORT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 连接服务器</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ADDR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 发送数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetServiceInfoReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">password </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">PASSWORD</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">public_net_ip </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> HOST</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">is_show </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> IS_SHOW</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sequence_number </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> SEQUENCE_NUMBER</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">CommonMsg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">type</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;GetServiceInfoReq&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 序列化</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sendData </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获取协议总长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len_ </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;i%dsIi&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    end_flag </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7777777</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 拼接消息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Splicing_String </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> struct</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">pack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> data_len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> adler32</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> end_flag</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">send</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Splicing_String</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    target </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetServiceInfoAck</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0.1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 接收前四个字节，解析数据长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        test </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">from_bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> byteorder</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;little&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 根据数据长度再次接收数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 将接收到的数据的最后8字节删除,最后8字节的内容是校验和、end_flag</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply3 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> reply2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 反序列化reply3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 格式化数据，并转为字典格式</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        message_GetServiceInfoReq </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_to_dict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        json_output </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">message_GetServiceInfoReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> indent</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ensure_ascii</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">False</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 返回json数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> json_output</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="十一、发起交易接口"></a>十一、发起交易接口<a class="hash-link" href="#十一、发起交易接口" title="Direct link to heading">#</a></h5><h6><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1主网地址发起交易接口（createtxmsgreq）"></a>1.主网地址发起交易接口（CreateTxMsgReq）<a class="hash-link" href="#1主网地址发起交易接口（createtxmsgreq）" title="Direct link to heading">#</a></h6><p>交易分两步</p><p>第一步:</p><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message CreateTxMsgReq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version                  = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string from                     = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string to                       = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string amt                      = 4;    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string minerFees                = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string needVerifyPreHashCount   = 6;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本</td></tr><tr><td align="center">from</td><td align="center">发起方钱包地址</td></tr><tr><td align="center">to</td><td align="center">接收方钱包地址</td></tr><tr><td align="center">amt</td><td align="center">交易金额</td></tr><tr><td align="center">minerFees</td><td align="center">发起交易方支付的单个签名的矿工费</td></tr><tr><td align="center">needVerifyPreHashCount</td><td align="center">签名共识数</td></tr><tr><td align="center">version</td><td align="center">版本号</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message CreateTxMsgAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version        = 1;                                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32        code           = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       message        = 3;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txData         = 4;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txEncodeHash   = 5;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本</td></tr><tr><td align="center">code</td><td align="center">0 为成功; -1 版本错误;  -2 参数错误 ; -3 utxo未找到</td></tr><tr><td align="center">message</td><td align="center">返回描述</td></tr><tr><td align="center">txData</td><td align="center">交易信息体</td></tr><tr><td align="center">txEncodeHash</td><td align="center">交易信息体base64之后sha256的hash值</td></tr></tbody></table></li></ol><p>第二步：</p><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message TxMsgReq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version        = 1;                                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       serTx          = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       strSignature   = 3;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       strPub         = 4;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txEncodeHash   = 5;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本</td></tr><tr><td align="center">serTx</td><td align="center">为第一次响应的txData</td></tr><tr><td align="center">strSignature</td><td align="center">base64编码后的签名信息</td></tr><tr><td align="center">strPub</td><td align="center">发起方公钥，需要base64编码。如果调用C动态库生成的公钥，需要将十六进制的字符串还原成二进制，再base64编码</td></tr><tr><td align="center">txEncodeHash</td><td align="center">为第一次响应的txEncodeHash</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message TxMsgAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version        = 1;                                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32        code           = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       message        = 3;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txHash         = 4;                     </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本</td></tr><tr><td align="center">code</td><td align="center">0为发起交易成功，交易开始广播;; -1 版本错误; -2 反序列交易失败; -3 交易体无效; -4 数据库创建事务失败; -5 (未使用); -7 已经签名; -8 验证签名失败; -9 获取本节点签名费失败; -10 发起交易方支付的 GasFee 为 0; -11 未找到匹配的签名节点;</td></tr><tr><td align="center">message</td><td align="center">返回描述</td></tr><tr><td align="center">txHash</td><td align="center">交易hash</td></tr></tbody></table></li></ol><h6><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="2手机端多重交易接口（createmultitxmsgreq）"></a>2.手机端多重交易接口（CreateMultiTxMsgReq）<a class="hash-link" href="#2手机端多重交易接口（createmultitxmsgreq）" title="Direct link to heading">#</a></h6><p> 交易分两步</p><p> 第一步:</p><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message CreateMultiTxMsgReq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version            = 1;                                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated string from            = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated ToAddr to              = 3;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string minerFees                = 5;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string needVerifyPreHashCount   = 6;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message ToAddr</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string toAddr                   = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string amt                      = 2; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本</td></tr><tr><td align="center">from</td><td align="center">发起方钱包地址</td></tr><tr><td align="center">to</td><td align="center">接收方钱包地址数组</td></tr><tr><td align="center">minerFees</td><td align="center">发起交易方支付的单个签名的矿工费</td></tr><tr><td align="center">needVerifyPreHashCount</td><td align="center">共识数</td></tr><tr><td align="center">toAddr</td><td align="center">接收方钱包地址</td></tr><tr><td align="center">amt</td><td align="center">金额</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message CreateMultiTxMsgAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version        = 1;                                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32        code           = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       message        = 3;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txData         = 4;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txEncodeHash   = 5;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本</td></tr><tr><td align="center">code</td><td align="center">0 为成功; -1 版本错误;  -2 参数错误 ; -3 utxo未找到</td></tr><tr><td align="center">message</td><td align="center">返回描述</td></tr><tr><td align="center">txData</td><td align="center">交易信息体</td></tr><tr><td align="center">txEncodeHash</td><td align="center">交易信息体base64之后sha256的hash值</td></tr></tbody></table></li></ol><p> 第二步：</p><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message MultiTxMsgReq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version        = 1;                                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       serTx          = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated SignInfo signInfo  = 3;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txEncodeHash   = 4;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message SignInfo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string signStr              = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string pubStr               = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本</td></tr><tr><td align="center">serTx</td><td align="center">为第一次响应的txData</td></tr><tr><td align="center">signInfo</td><td align="center">签名信息数组</td></tr><tr><td align="center">txEncodeHash</td><td align="center">为第一次响应的txEncodeHash</td></tr><tr><td align="center">signStr</td><td align="center">base64之后签名信息 ？</td></tr><tr><td align="center">pubStr</td><td align="center">base64之后公钥 ？</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message TxMsgAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version        = 1;                                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32        code           = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       message        = 3;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txHash         = 4;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本</td></tr><tr><td align="center">code</td><td align="center">0为发起交易成功，交易开始广播; -1 版本错误; -2 反序列交易失败; -3 交易体无效; -4 数据库创建事务失败; -5 (未使用); -7 已经签名; -8 验证签名失败; -9 获取本节点签名费失败; -10 发起交易方支付的 GasFee 为 0; -11 未找到匹配的签名节点</td></tr><tr><td align="center">message</td><td align="center">返回描述</td></tr><tr><td align="center">txHash</td><td align="center">交易hash</td></tr></tbody></table></li></ol><h6><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="3手机端连接节点，控制节点发起交易发起交易接口（createdevicetxmsgreq）"></a>3.手机端连接节点，控制节点发起交易发起交易接口（CreateDeviceTxMsgReq）<a class="hash-link" href="#3手机端连接节点，控制节点发起交易发起交易接口（createdevicetxmsgreq）" title="Direct link to heading">#</a></h6><p>交易分两步</p><p>第一步验证密码:</p><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message VerifyDevicePasswordReq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version        = 1;                                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       password       = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本</td></tr><tr><td align="center">password</td><td align="center">密码</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message VerifyDevicePasswordAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version        = 1;                                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32        code           = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       message        = 3;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本</td></tr><tr><td align="center">code</td><td align="center">返回错误码</td></tr><tr><td align="center">message</td><td align="center">返回描述</td></tr></tbody></table></li></ol><p> 第二步发起交易：</p><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message CreateDeviceTxMsgReq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version                  = 1;                                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string from                     = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string to                       = 3;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string amt                      = 4;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string minerFees                = 5;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string needVerifyPreHashCount   = 6;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> string password                 = 7;                       </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本</td></tr><tr><td align="center">from</td><td align="center">交易发起方地址</td></tr><tr><td align="center">to</td><td align="center">交易接收方地址</td></tr><tr><td align="center">amt</td><td align="center">交易金额</td></tr><tr><td align="center">minerFees</td><td align="center">发起交易方支付的单个签名的矿工费</td></tr><tr><td align="center">needVerifyPreHashCount</td><td align="center">共识数</td></tr><tr><td align="center">password</td><td align="center">节点密码</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message TxMsgAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version        = 1;                                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32        code           = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       message        = 3;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txHash         = 4;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本</td></tr><tr><td align="center">code</td><td align="center">0为发起交易成功，交易开始广播; -1 版本错误; -2 反序列交易失败; -3 交易体无效; -4 数据库创建事务失败; -5 (未使用); -7 已经签名; -8 验证签名失败; -9 获取本节点签名费失败; -10 发起交易方支付的 GasFee 为 0; -11 未找到匹配的签名节点;</td></tr><tr><td align="center">message</td><td align="center">返回描述</td></tr><tr><td align="center">txHash</td><td align="center">为空，无数据</td></tr></tbody></table></li></ol><h6><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="4手机端连接节点发起多重交易接口（createdevicemultitxmsgreq）"></a>4.手机端连接节点发起多重交易接口（CreateDeviceMultiTxMsgReq）<a class="hash-link" href="#4手机端连接节点发起多重交易接口（createdevicemultitxmsgreq）" title="Direct link to heading">#</a></h6><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message CreateDeviceMultiTxMsgReq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version            = 1;                                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated string from            = 2;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated ToAddr to              = 3;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string gasFees                  = 4;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string needVerifyPreHashCount   = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> string password                 = 6;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本</td></tr><tr><td align="center">from</td><td align="center">交易发起方地址</td></tr><tr><td align="center">to</td><td align="center">交易接收方地址</td></tr><tr><td align="center">gasFees</td><td align="center">发起交易方支付的单个签名的矿工费</td></tr><tr><td align="center">needVerifyPreHashCount</td><td align="center">共识数</td></tr><tr><td align="center">password</td><td align="center">节点密码</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message TxMsgAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version        = 1;                                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32        code           = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       message        = 3;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txHash         = 4;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本</td></tr><tr><td align="center">code</td><td align="center">0为发起交易成功，交易开始广播; -1 版本错误; -2 反序列交易失败; -3 交易体无效; -4 数据库创建事务失败; -5 (未使用); -7 已经签名; -8 验证签名失败; -9 获取本节点签名费失败; -10 发起交易方支付的 GasFee 为 0; -11 未找到匹配的签名节点;</td></tr><tr><td align="center">message</td><td align="center">返回描述</td></tr><tr><td align="center">txHash</td><td align="center">交易hash</td></tr></tbody></table></li></ol><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="十二、查询块信息接口（getblockinforeq）"></a>十二、查询块信息接口（GetBlockInfoReq）<a class="hash-link" href="#十二、查询块信息接口（getblockinforeq）" title="Direct link to heading">#</a></h5><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetBlockInfoReq </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sint32 height = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sint32 count = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">height</td><td align="center">高度</td></tr><tr><td align="center">count</td><td align="center">一共需要查询的块数</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetBlockInfoAck {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sint32 code = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string description = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    //data</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 top = 4; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated BlockInfo block_info_list = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 tx_count = 6; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message BlockInfo </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sint32 height = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string hash_merkle_root = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string hash_prev_block = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string block_hash = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 ntime = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated TxInfo tx_info_list = 6;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string packet_fee = 7;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string packet_ip = 8;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message TxInfo </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string tx_hash = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated string transaction_signer = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated TxVinInfo vin_list = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated TxVoutInfo vout_list = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 nlock_time = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string stx_owner = 6;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 stx_owner_index = 7;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 version = 8;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message TxVinInfo </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string script_sig = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string pre_vout_hash = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 pre_vout_index = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message TxVoutInfo </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string script_pubkey = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string amount = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">返回值</td></tr><tr><td align="center">description</td><td align="center">返回描述</td></tr><tr><td align="center">top</td><td align="center">块高度</td></tr><tr><td align="center">block_info_list</td><td align="center">BlockInfo块信息结构体数组</td></tr><tr><td align="center">tx_count</td><td align="center">交易数</td></tr><tr><td align="center">height</td><td align="center">块高度</td></tr><tr><td align="center">hash_merkle_root</td><td align="center">merkle值</td></tr><tr><td align="center">hash_prev_block</td><td align="center">上一个块hash</td></tr><tr><td align="center">block_hash</td><td align="center">块hash</td></tr><tr><td align="center">ntime</td><td align="center">建块时间</td></tr><tr><td align="center">tx_info_list</td><td align="center">TxInfo 交易信息结构体数组</td></tr><tr><td align="center">packet_fee</td><td align="center">打包费</td></tr><tr><td align="center">packet_ip</td><td align="center">打包费节点ip</td></tr><tr><td align="center">tx_hash</td><td align="center">交易hash</td></tr><tr><td align="center">transaction_signer</td><td align="center">交易签名</td></tr><tr><td align="center">vin_list</td><td align="center">TxVinInfo 交易vin信息结构体数组</td></tr><tr><td align="center">vout_list</td><td align="center">TxVoutInfo 交易vout信息结构体数组</td></tr><tr><td align="center">nlock_time</td><td align="center">建块时间</td></tr><tr><td align="center">stx_owner</td><td align="center">交易方钱包地址</td></tr><tr><td align="center">stx_owner_index</td><td align="center">交易方钱包地址索引号</td></tr><tr><td align="center">version</td><td align="center">交易版本号</td></tr><tr><td align="center">script_sig</td><td align="center">签名</td></tr><tr><td align="center">pre_vout_hash</td><td align="center">vout hash</td></tr><tr><td align="center">pre_vout_index</td><td align="center">vout hash索引</td></tr><tr><td align="center">script_pubkey</td><td align="center">钱包地址</td></tr><tr><td align="center">amount</td><td align="center">金额</td></tr></tbody></table></li></ol><p>3.代码示例</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 查询块信息接口（GetBlockInfoReq）</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">GetBlockInfoRequest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 固定参数(参数可修改)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    HOST </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;192.168.1.141&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PORT </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11187</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    VERSION </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1_1.3_p&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    HEIGHT </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    COUNT </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 创建socket请求</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">AF_INET</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SOCK_STREAM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ADDR </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">HOST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> PORT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 连接服务器</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ADDR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 发送数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetBlockInfoReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">height </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> HEIGHT</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> COUNT</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">CommonMsg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">type</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;GetBlockInfoReq&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 序列化</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sendData </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获取协议总长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len_ </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;i%dsIi&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    end_flag </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7777777</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 拼接消息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Splicing_String </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> struct</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">pack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> data_len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> adler32</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> end_flag</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">send</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Splicing_String</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    target </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetBlockInfoAck</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0.1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 接收前四个字节，解析数据长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        test </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">from_bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> byteorder</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;little&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 根据数据长度再次接收数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 将接收到的数据的最后8字节删除,最后8字节的内容是校验和、end_flag</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply3 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> reply2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 反序列化reply3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 格式化数据，并转为字典格式</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        message_GetBlockInfoReq </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_to_dict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        json_output </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">message_GetBlockInfoReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> indent</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ensure_ascii</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">False</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 返回json数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> json_output</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="十三、根据钱包地址查询交易信息接口（getaddrinforeq）"></a>十三、根据钱包地址查询交易信息接口（GetAddrInfoReq）<a class="hash-link" href="#十三、根据钱包地址查询交易信息接口（getaddrinforeq）" title="Direct link to heading">#</a></h5><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetAddrInfoReq </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string address = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 index = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 count = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">address</td><td align="center">钱包地址</td></tr><tr><td align="center">index</td><td align="center">查询第一个块的索引(第一次传-1)</td></tr><tr><td align="center">count</td><td align="center">一共需要查询的块数</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetAddrInfoAck {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sint32 code = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string description = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 total = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated BlockInfo block_info_list = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message BlockInfo </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sint32 height = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string hash_merkle_root = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string hash_prev_block = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string block_hash = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 ntime = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated TxInfo tx_info_list = 6;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string packet_fee = 7;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string packet_ip = 8;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message TxInfo </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string tx_hash = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated string transaction_signer = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated TxVinInfo vin_list = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated TxVoutInfo vout_list = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 nlock_time = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string stx_owner = 6;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 stx_owner_index = 7;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 version = 8;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message TxVinInfo </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string script_sig = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string pre_vout_hash = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 pre_vout_index = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message TxVoutInfo </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string script_pubkey = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string amount = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">0 为成功; -1 获取失败 没有交易块产生; -2 起始索引超出范围</td></tr><tr><td align="center">description</td><td align="center">返回描述</td></tr><tr><td align="center">total</td><td align="center">返回总数</td></tr><tr><td align="center">block_info_list</td><td align="center">BlockInfo块信息结构体数组</td></tr><tr><td align="center">height</td><td align="center">块高度</td></tr><tr><td align="center">hash_merkle_root</td><td align="center">merkle值</td></tr><tr><td align="center">hash_prev_block</td><td align="center">上一个块hash</td></tr><tr><td align="center">block_hash</td><td align="center">块hash</td></tr><tr><td align="center">ntime</td><td align="center">建块时间</td></tr><tr><td align="center">tx_info_list</td><td align="center">TxInfo 交易信息结构体数组</td></tr><tr><td align="center">packet_fee</td><td align="center">打包费</td></tr><tr><td align="center">packet_ip</td><td align="center">打包费节点ip</td></tr><tr><td align="center">tx_hash</td><td align="center">交易hash</td></tr><tr><td align="center">transaction_signer</td><td align="center">交易签名</td></tr><tr><td align="center">vin_list</td><td align="center">TxVinInfo 交易vin信息结构体数组</td></tr><tr><td align="center">vout_list</td><td align="center">TxVoutInfo 交易vout信息结构体数组</td></tr><tr><td align="center">nlock_time</td><td align="center">建块时间</td></tr><tr><td align="center">stx_owner</td><td align="center">交易方钱包地址</td></tr><tr><td align="center">stx_owner_index</td><td align="center">交易方钱包地址索引号</td></tr><tr><td align="center">version</td><td align="center">交易版本号</td></tr><tr><td align="center">script_sig</td><td align="center">签名</td></tr><tr><td align="center">pre_vout_hash</td><td align="center">vout hash</td></tr><tr><td align="center">pre_vout_index</td><td align="center">vout hash索引</td></tr><tr><td align="center">script_pubkey</td><td align="center">钱包地址</td></tr><tr><td align="center">amount</td><td align="center">金额</td></tr></tbody></table></li></ol><p>3.代码示例</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 根据钱包地址查询交易信息接口（GetAddrInfoReq）</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">GetAddrInfoRequest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 固定参数(参数可修改)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    HOST </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;192.168.1.141&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PORT </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11187</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    VERSION </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1_1.3_p&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ADDRESS </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;13C4UmhB7tKGdXiJrp2GKsJtmCoJeqGJQz&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    INDEX </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    COUNT </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 创建socket请求</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">AF_INET</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SOCK_STREAM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ADDR </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">HOST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> PORT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 连接服务器</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ADDR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 发送数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetAddrInfoReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">address </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ADDRESS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">index </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> INDEX</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> COUNT</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">CommonMsg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">type</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;GetAddrInfoReq&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 序列化</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sendData </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获取协议总长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len_ </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;i%dsIi&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    end_flag </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7777777</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 拼接消息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Splicing_String </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> struct</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">pack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> data_len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> adler32</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> end_flag</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># print(&#x27;Splicing_String&quot;&#x27;, Splicing_String)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">send</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Splicing_String</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    target </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetAddrInfoAck</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0.1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 接收前四个字节，解析数据长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        test </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">from_bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> byteorder</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;little&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 根据数据长度再次接收数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 将接收到的数据的最后8字节删除,最后8字节的内容是校验和、end_flag</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply3 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> reply2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 反序列化reply3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 格式化数据，并转为字典格式</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        message_GetAddrInfoReq </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_to_dict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        json_output </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">message_GetAddrInfoReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> indent</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ensure_ascii</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">False</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 返回json数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> json_output</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="十四、获取节点公私钥助记词请求（getdevprivatekeyreq）"></a>十四、获取节点公私钥助记词请求（GetDevPrivateKeyReq）<a class="hash-link" href="#十四、获取节点公私钥助记词请求（getdevprivatekeyreq）" title="Direct link to heading">#</a></h5><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetDevPrivateKeyReq </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version      = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string password     = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string bs58addr     = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">password</td><td align="center">节点密码</td></tr><tr><td align="center">bs58addr</td><td align="center">Base58地址</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetDevPrivateKeyAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string   version                                = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32    code                                   = 2;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string   description                            = 3;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated  DevPrivateKeyInfo  devprivatekeyinfo  = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message DevPrivateKeyInfo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string base58addr   = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string keystore     = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string mnemonic     = 3;    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">返回错误码</td></tr><tr><td align="center">description</td><td align="center">返回错误信息</td></tr><tr><td align="center">devprivatekeyinfo</td><td align="center">设备私钥信息</td></tr><tr><td align="center">base58addr</td><td align="center">Base58地址</td></tr><tr><td align="center">keystore</td><td align="center">keystore</td></tr><tr><td align="center">mnemonic</td><td align="center">助记词</td></tr></tbody></table></li></ol><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="十五、（解）质押接口"></a>十五、（解）质押接口<a class="hash-link" href="#十五、（解）质押接口" title="Direct link to heading">#</a></h5><h6><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1发起质押请求主网请求（createpledgetxmsgreq）"></a>1.发起质押请求(主网请求)（CreatePledgeTxMsgReq）<a class="hash-link" href="#1发起质押请求主网请求（createpledgetxmsgreq）" title="Direct link to heading">#</a></h6><p>第一步：</p><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message CreatePledgeTxMsgReq </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version                  = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string addr                     = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string amt                      = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string needVerifyPreHashCount   = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string gasFees                  = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">addr</td><td align="center">质押地址</td></tr><tr><td align="center">amt</td><td align="center">质押金额</td></tr><tr><td align="center">needVerifyPreHashCount</td><td align="center">签名个数</td></tr><tr><td align="center">gasFees</td><td align="center">燃料费</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message CreatePledgeTxMsgAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version        = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32        code           = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       message    = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txData         = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txEncodeHash   = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">0 成功； -1 版本错误； -2 参数错误； -3 创建事务失败； -4  创建交易体失败</td></tr><tr><td align="center">description</td><td align="center">返回错误信息</td></tr><tr><td align="center">txData</td><td align="center">交易信息体</td></tr><tr><td align="center">txEncodeHash</td><td align="center">交易信息体base64之后sha256的hash值</td></tr></tbody></table></li></ol><p>第二步：</p><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message PledgeTxMsgReq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version        = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       serTx          = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       strSignature   = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       strPub         = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txEncodeHash   = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">serTx</td><td align="center">交易信息体</td></tr><tr><td align="center">strSignature</td><td align="center">签名信息</td></tr><tr><td align="center">strPub</td><td align="center">发起方公钥</td></tr><tr><td align="center">txEncodeHash</td><td align="center">交易信息体base64之后sha256的hash值</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message TxMsgAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version        = 1;                                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32        code           = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       message        = 3;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txHash         = 4;                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">0 成功； -1 交易体类型错误； -2反序列化接收数据失败； -3 交易体不合法； -4 事务创建失败； -7  已经签名，无需重复签名； -8 验证签名失败； -9 节点未设置签名费； -10 发起方支付的燃油费为0； -11 找不到可签名的节点； -101 版本不兼容； -102 事务创建失败</td></tr><tr><td align="center">message</td><td align="center">返回错误信息</td></tr><tr><td align="center">txHash</td><td align="center">交易hash</td></tr></tbody></table></li></ol><h6><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="2-解除质押主网请求（createredeemtxmsgreq）"></a>2. 解除质押(主网请求)（CreateRedeemTxMsgReq）<a class="hash-link" href="#2-解除质押主网请求（createredeemtxmsgreq）" title="Direct link to heading">#</a></h6><p>第一步：</p><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message CreateRedeemTxMsgReq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string   version                    = 1;                                 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string   addr                       = 2;                                     </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string   amt                        = 3;                                     </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string   needVerifyPreHashCount     = 4;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string   gasFees                    = 5; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string   txHash                     = 6;                          </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">addr</td><td align="center">解质押的地址</td></tr><tr><td align="center">amt</td><td align="center">解质押金额</td></tr><tr><td align="center">needVerifyPreHashCount</td><td align="center">共识数个数</td></tr><tr><td align="center">gasFees</td><td align="center">燃料费</td></tr><tr><td align="center">txHash</td><td align="center">交易hash</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message CreateRedeemTxMsgAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version        = 1;                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32        code           = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       description    = 3;                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txData         = 4;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txEncodeHash   = 5;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">0 成功； -1 版本错误； -2 参数错误； -3 事务创建失败； -4 获取质押地址失败； -5 账号未质押； -6 获取块失败； -7 未找到块头； -8 获取质押的UTXO失败； -9 未找到质押的UTXO； -10 创建解质押交易失败；</td></tr><tr><td align="center">description</td><td align="center">返回错误信息</td></tr><tr><td align="center">txData</td><td align="center">交易信息体</td></tr><tr><td align="center">txEncodeHash</td><td align="center">交易信息体base64之后sha256的hash值</td></tr></tbody></table></li></ol><p>第二步：</p><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message RedeemTxMsgReq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version        = 1;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       serTx          = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       strSignature   = 3;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       strPub         = 4;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txEncodeHash   = 5;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">serTx</td><td align="center">交易信息体</td></tr><tr><td align="center">strSignature</td><td align="center">签名信息</td></tr><tr><td align="center">strPub</td><td align="center">发起方公钥</td></tr><tr><td align="center">txEncodeHash</td><td align="center">交易信息体base64之后sha256的hash值</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message TxMsgAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version        = 1;                                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32        code           = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       message        = 3;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txHash         = 4;                        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">0 成功； -1 交易体类型错误； -2反序列化接收数据失败； -3 交易体不合法； -4 事务创建失败； -7  已经签名，无需重复签名； -8 验证签名失败； -9 节点未设置签名费； -10 发起方支付的燃油费为0； -11 找不到可签名的节点； -101 版本不兼容；</td></tr><tr><td align="center">message</td><td align="center">返回错误信息</td></tr><tr><td align="center">txHash</td><td align="center">交易hash</td></tr></tbody></table></li></ol><h6><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="3手机端连接节点发起质押交易请求（createdevicepledgetxmsgreq）"></a>3.手机端连接节点发起质押交易请求（CreateDevicePledgeTxMsgReq）<a class="hash-link" href="#3手机端连接节点发起质押交易请求（createdevicepledgetxmsgreq）" title="Direct link to heading">#</a></h6><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message CreateDevicePledgeTxMsgReq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version                = 1;                  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string addr                   = 2;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string amt                    = 3;                     </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string needVerifyPreHashCount = 4;                      </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string gasFees                = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string password               = 6;                      </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">addr</td><td align="center">质押的地址</td></tr><tr><td align="center">amt</td><td align="center">质押金额</td></tr><tr><td align="center">needVerifyPreHashCount</td><td align="center">共识数个数</td></tr><tr><td align="center">gasFees</td><td align="center">燃料费</td></tr><tr><td align="center">password</td><td align="center">密码</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message TxMsgAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version        = 1;                                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32        code           = 2;                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       message        = 3;                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txHash         = 4;                     </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">返回错误码</td></tr><tr><td align="center">message</td><td align="center">返回错误信息</td></tr><tr><td align="center">txHash</td><td align="center">交易hash</td></tr></tbody></table></li></ol><h6><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="4-手机端连接节点发起解质押交易请求（createdeviceredeemtxreq）"></a>4. 手机端连接节点发起解质押交易请求（CreateDeviceRedeemTxReq）<a class="hash-link" href="#4-手机端连接节点发起解质押交易请求（createdeviceredeemtxreq）" title="Direct link to heading">#</a></h6><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message CreateDeviceRedeemTxReq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version                = 1;                     </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string addr                   = 2;                     </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string needVerifyPreHashCount = 3;                  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string gasFees                = 4;                       </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string utxo                   = 5;                    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">addr</td><td align="center">质押的地址</td></tr><tr><td align="center">needVerifyPreHashCount</td><td align="center">签名个数</td></tr><tr><td align="center">gasFees</td><td align="center">燃料费</td></tr><tr><td align="center">utxo</td><td align="center">要解压的utxo</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message TxMsgAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       version        = 1;                                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32        code           = 2;                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       message        = 3;                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string       txHash         = 4;                     </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">返回错误码</td></tr><tr><td align="center">message</td><td align="center">返回错误信息</td></tr><tr><td align="center">txHash</td><td align="center">交易hash</td></tr></tbody></table></li></ol><h6><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="5质押列表请求（getpledgelistreq）"></a>5.质押列表请求（GetPledgeListReq）<a class="hash-link" href="#5质押列表请求（getpledgelistreq）" title="Direct link to heading">#</a></h6><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetPledgeListReq </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version  = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string addr     = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string txhash = 3; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 count    = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">addr</td><td align="center">查询地址</td></tr><tr><td align="center">txhash</td><td align="center">该hash的下一个为起始交易,第一次使用时，使用空字符串</td></tr><tr><td align="center">count</td><td align="center">查询数量</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetPledgeListAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version              = 1; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32 code                  = 2; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string description          = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated PledgeItem list    = 4; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 total                = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string lasthash              = 6; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message PledgeItem</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string blockhash            = 1; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 blockheight          = 2; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string utxo                 = 3; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string amount               = 4; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 time                 = 5; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string fromaddr             = 6; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string toaddr               = 7; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string detail               = 8; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">返回错误码 0 成功; -1 地址为空; -2 获得质押信息错误; -3 该地址无质押; -4 索引越界;</td></tr><tr><td align="center">description</td><td align="center">返回错误信息</td></tr><tr><td align="center">list</td><td align="center">质押信息列表</td></tr><tr><td align="center">total</td><td align="center">质押条目总数量</td></tr><tr><td align="center">lashhash</td><td align="center">最后一个交易哈希</td></tr><tr><td align="center">blockhash</td><td align="center">区块哈希</td></tr><tr><td align="center">blockheight</td><td align="center">区块高度</td></tr><tr><td align="center">utxo</td><td align="center">utox</td></tr><tr><td align="center">amount</td><td align="center">质押资产值</td></tr><tr><td align="center">time</td><td align="center">时间戳</td></tr><tr><td align="center">fromaddr</td><td align="center">发起地址</td></tr><tr><td align="center">toaddr</td><td align="center">接收地址</td></tr><tr><td align="center">detail</td><td align="center">详情描述</td></tr></tbody></table><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="十六、获得交易信息列表请求（gettxinfolistreq）"></a>十六、获得交易信息列表请求（GetTxInfoListReq）<a class="hash-link" href="#十六、获得交易信息列表请求（gettxinfolistreq）" title="Direct link to heading">#</a></h5></li><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetTxInfoListReq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string addr = 2; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string txhash = 3; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 count = 4; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">addr</td><td align="center">地址</td></tr><tr><td align="center">txhash</td><td align="center">该hash的下一个为起始交易,第一次使用时，使用空字符串</td></tr><tr><td align="center">count</td><td align="center">查询数量</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetTxInfoListAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32 code = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string description = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated TxInfoItem list = 4; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 total = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string lasthash = 6; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message TxInfoItem</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    TxInfoType type = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string txhash = 2; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 time = 3; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string amount = 4; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">enum TxInfoType {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    TxInfoType_Unknown = 0;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    TxInfoType_Originator = 1; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    TxInfoType_Receiver = 2; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    TxInfoType_Gas = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    TxInfoType_Award = 4; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    TxInfoType_Pledge = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    TxInfoType_RedeemPledge = 6;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    TxInfoType_PledgedAndRedeemed  = 7; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">返回错误码 0 成功; -1 地址长度不正确; -2 获得交易信息失败; -3 该地址无交易信息; -4 索引越界; -5 获得交易信息错误;</td></tr><tr><td align="center">description</td><td align="center">返回错误信息</td></tr><tr><td align="center">list</td><td align="center">交易信息列表</td></tr><tr><td align="center">total</td><td align="center">交易条目总数量</td></tr><tr><td align="center">lasthash</td><td align="center">最后一个交易哈希</td></tr><tr><td align="center">type</td><td align="center">交易类型，详见enum TxInfoType类型说明</td></tr><tr><td align="center">txhash</td><td align="center">交易哈希</td></tr><tr><td align="center">time</td><td align="center">时间戳</td></tr><tr><td align="center">amount</td><td align="center">交易额</td></tr><tr><td align="center">TxInfoType_Unknown</td><td align="center">未知</td></tr><tr><td align="center">TxInfoType_Originator</td><td align="center">交易发起方</td></tr><tr><td align="center">TxInfoType_Receiver</td><td align="center">交易接收方</td></tr><tr><td align="center">TxInfoType_Gas</td><td align="center">手续费奖励</td></tr><tr><td align="center">TxInfoType_Award</td><td align="center">区块奖励</td></tr><tr><td align="center">TxInfoType_Pledge</td><td align="center">质押</td></tr><tr><td align="center">TxInfoType_RedeemPledge</td><td align="center">解除质押</td></tr><tr><td align="center">TxInfoType_PledgedAndRedeemed</td><td align="center">质押但已解除</td></tr></tbody></table></li></ol><p>3.代码示例</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获得交易信息列表请求（GetTxInfoListReq）</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">GetTxInfoListRequest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 固定参数(参数可修改)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    HOST </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;192.168.1.141&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PORT </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11187</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    VERSION </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1_1.3_p&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ADDRESS </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;13C4UmhB7tKGdXiJrp2GKsJtmCoJeqGJQz&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    TXHASH </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    COUNT </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 创建socket请求</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">AF_INET</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SOCK_STREAM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ADDR </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">HOST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> PORT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 连接服务器</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ADDR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 发送数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetTxInfoListReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">addr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ADDRESS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">txhash </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> TXHASH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> COUNT</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">CommonMsg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">type</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;GetTxInfoListReq&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 序列化</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sendData </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获取协议总长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len_ </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;i%dsIi&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    end_flag </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7777777</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 拼接消息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Splicing_String </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> struct</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">pack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> data_len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> adler32</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> end_flag</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">send</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Splicing_String</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    target </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetTxInfoListAck</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0.1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 接收前四个字节，解析数据长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        test </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">from_bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> byteorder</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;little&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 根据数据长度再次接收数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 将接收到的数据的最后8字节删除,最后8字节的内容是校验和、end_flag</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply3 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> reply2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 反序列化reply3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 格式化数据，并转为字典格式</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        message_GetTxInfoListReq </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_to_dict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        json_output </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">message_GetTxInfoListReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> indent</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ensure_ascii</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">False</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 返回json数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> json_output</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="十七、获得交易详情接口（gettxinfodetailreq）"></a>十七、获得交易详情接口（GetTxInfoDetailReq）<a class="hash-link" href="#十七、获得交易详情接口（gettxinfodetailreq）" title="Direct link to heading">#</a></h5><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetTxInfoDetailReq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string txhash = 2; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string addr = 3; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">txhash</td><td align="center">交易哈希</td></tr><tr><td align="center">addr</td><td align="center">地址，传空值则不会查询针对该地址的奖励信息</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetTxInfoDetailAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32 code = 2; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string description = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string blockhash = 4; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 blockheight = 5; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string txhash = 6;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 time = 7; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated string fromaddr = 8; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated string toaddr = 9; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string gas = 10; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string amount = 11;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string award = 12;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string awardGas = 13; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string awardAmount = 14;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">返回错误码 0 成功; -1 传入的交易哈希值为空; -2 获得区块错误; -3 获得区块信息错误 -4 区块错误;</td></tr><tr><td align="center">description</td><td align="center">返回错误信息</td></tr><tr><td align="center">blockhash</td><td align="center">区块哈希</td></tr><tr><td align="center">blockheight</td><td align="center">区块高度</td></tr><tr><td align="center">txhash</td><td align="center">交易哈希</td></tr><tr><td align="center">time</td><td align="center">时间戳</td></tr><tr><td align="center">fromaddr</td><td align="center">发起地址</td></tr><tr><td align="center">toaddr</td><td align="center">接收地址</td></tr><tr><td align="center">gas</td><td align="center">付出交易Gas</td></tr><tr><td align="center">amount</td><td align="center">交易额</td></tr><tr><td align="center">award</td><td align="center">奖励额</td></tr><tr><td align="center">awardGas</td><td align="center">获得奖励Gas</td></tr><tr><td align="center">awardAmount</td><td align="center">区块奖励</td></tr></tbody></table></li></ol><p>3.代码示例</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获得交易详情接口（GetTxInfoDetailReq）</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">GetTxInfoDetailRequest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 固定参数(参数可修改)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    HOST </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;192.168.1.141&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PORT </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11187</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    VERSION </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1_1.3_p&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    TXHASH </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;ae32299aebe597985c62dff443f7d73925367ddb52de9c23eefe8ef1736587e0&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ADDR </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1Aw58713G6hSAJ9iiiX1JZhRrudbPSCDhK&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 创建socket请求</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">AF_INET</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SOCK_STREAM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ADDRS </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">HOST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> PORT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 连接服务器</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ADDRS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 发送数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetTxInfoDetailReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">txhash </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> TXHASH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">addr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ADDR</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">CommonMsg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">type</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;GetTxInfoDetailReq&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 序列化</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sendData </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获取协议总长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len_ </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;i%dsIi&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    end_flag </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7777777</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 拼接消息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Splicing_String </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> struct</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">pack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> data_len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> adler32</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> end_flag</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">send</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Splicing_String</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    target </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetTxInfoDetailAck</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0.1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 接收前四个字节，解析数据长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        test </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">from_bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> byteorder</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;little&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 根据数据长度再次接收数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 将接收到的数据的最后8字节删除,最后8字节的内容是校验和、end_flag</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply3 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> reply2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 反序列化reply3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 格式化数据，并转为字典格式</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        message_GetServiceInfoReq </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_to_dict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        json_output </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">message_GetServiceInfoReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> indent</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ensure_ascii</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">False</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 返回json数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> json_output</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="十八、获得区块列表接口（getblockinfolistreq）"></a>十八、获得区块列表接口（GetBlockInfoListReq）<a class="hash-link" href="#十八、获得区块列表接口（getblockinfolistreq）" title="Direct link to heading">#</a></h5><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetBlockInfoListReq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 index = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 count = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">index</td><td align="center">索引</td></tr><tr><td align="center">count</td><td align="center">数量</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetBlockInfoListAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32 code = 2; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string description = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 top = 4; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 txcount = 5; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated BlockInfoItem list = 6; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message BlockInfoItem</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string blockhash = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 blockheight = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 time = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string txHash = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated string fromAddr = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated string toAddr = 6; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string amount = 7; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">返回错误码 0 成功; -1 版本不兼容; -2 读取数据失败; -3 获得区块高度失败; -4 获得交易数量失败; -5 获得交易数量失败; -6 保留; -7 获得区块哈希值错误; -8 获得区块错误</td></tr><tr><td align="center">description</td><td align="center">返回错误信息</td></tr><tr><td align="center">top</td><td align="center">总高度</td></tr><tr><td align="center">txcount</td><td align="center">总交易笔数</td></tr><tr><td align="center">list</td><td align="center">区块信息列表</td></tr><tr><td align="center">blockhash</td><td align="center">区块哈希</td></tr><tr><td align="center">blockheight</td><td align="center">区块高度</td></tr><tr><td align="center">time</td><td align="center">时间戳</td></tr><tr><td align="center">txHash</td><td align="center">交易哈希</td></tr><tr><td align="center">fromAddr</td><td align="center">发起方地址</td></tr><tr><td align="center">toAddr</td><td align="center">接收方地址</td></tr><tr><td align="center">amount</td><td align="center">交易额</td></tr></tbody></table></li></ol><p>3.代码示例</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获得区块列表接口（GetBlockInfoListReq）</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">GetBlockInfoListRequest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 固定参数(参数可修改)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    HOST </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;192.168.1.141&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PORT </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11187</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    VERSION </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1_1.3_p&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    INDEX </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    COUNT </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 创建socket请求</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">AF_INET</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SOCK_STREAM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ADDR </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">HOST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> PORT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 连接服务器</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ADDR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 发送数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetBlockInfoListReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">index </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> INDEX</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">count </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> COUNT</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">CommonMsg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">type</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;GetBlockInfoListReq&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 序列化</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sendData </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获取协议总长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len_ </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;i%dsIi&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    end_flag </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7777777</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 拼接消息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Splicing_String </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> struct</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">pack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> data_len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> adler32</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> end_flag</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">send</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Splicing_String</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    target </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetBlockInfoListAck</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0.1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 接收前四个字节，解析数据长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        test </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">from_bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> byteorder</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;little&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 根据数据长度再次接收数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 将接收到的数据的最后8字节删除,最后8字节的内容是校验和、end_flag</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply3 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> reply2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 反序列化reply3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 格式化数据，并转为字典格式</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        message_GetBlockInfoListReq </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_to_dict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        json_output </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">message_GetBlockInfoListReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> indent</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ensure_ascii</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">False</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 返回json数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> json_output</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="十九、获得区块详情请求（getblockinfodetailreq）"></a>十九、获得区块详情请求（GetBlockInfoDetailReq）<a class="hash-link" href="#十九、获得区块详情请求（getblockinfodetailreq）" title="Direct link to heading">#</a></h5><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetBlockInfoDetailReq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string blockhash = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">blockhash</td><td align="center">区块hash</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly dict"><div tabindex="0" class="prism-code language-dict codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetBlockInfoDetailAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int32 code = 2; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string description = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string blockhash = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 blockheight = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string merkleRoot = 6; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string prevHash = 7; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint64 time = 8;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string tatalAmount = 9; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated string signer = 10;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    repeated BlockInfoOutAddr blockInfoOutAddr = 11;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message BlockInfoOutAddr</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string addr = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string amount = 2; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">返回错误码 0 成功; -1 版本不兼容; -2 读取数据失败; -3 获得区块失败</td></tr><tr><td align="center">description</td><td align="center">返回错误信息</td></tr><tr><td align="center">blockhash</td><td align="center">区块哈希</td></tr><tr><td align="center">blockheight</td><td align="center">区块高度</td></tr><tr><td align="center">merkleRoot</td><td align="center">Merkle树根哈希</td></tr><tr><td align="center">prevHash</td><td align="center">前置区块哈希</td></tr><tr><td align="center">time</td><td align="center">时间戳</td></tr><tr><td align="center">tatalAmount</td><td align="center">交易总额,不包括手续费</td></tr><tr><td align="center">signer</td><td align="center">签名者</td></tr><tr><td align="center">blockInfoOutAddr</td><td align="center">交易额</td></tr><tr><td align="center">addr</td><td align="center">接收方地址</td></tr><tr><td align="center">amount</td><td align="center">接收金额</td></tr></tbody></table></li></ol><p>3.代码示例</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获得区块详情请求（GetBlockInfoDetailReq）</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">GetBlockInfoDetailRequest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 固定参数(参数可修改)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    HOST </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;192.168.1.141&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PORT </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11187</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    VERSION </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1_1.3_p&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># BLOCKHASH = &#x27;035a73e3b4998a6b6655b8226056d96037c2f5e87451fa7d4bfe868f462e4a3b&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    BLOCKHASH </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;efbb962803348012719f6260c60c30e0a561c31fe0f85737f1aa27a049da9253&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 创建socket请求</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">AF_INET</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SOCK_STREAM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ADDR </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">HOST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> PORT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 连接服务器</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ADDR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 发送数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetBlockInfoDetailReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">blockhash </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> BLOCKHASH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">CommonMsg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">version </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">type</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;GetBlockInfoDetailReq&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 序列化</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sendData </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SerializeToString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获取协议总长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data_len_ </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;i%dsIi&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">%</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    end_flag </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7777777</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 拼接消息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Splicing_String </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> struct</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">pack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data_len_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> data_len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> adler32</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sendData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> end_flag</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">send</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Splicing_String</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    target </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_pb2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GetBlockInfoDetailAck</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0.1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 接收前四个字节，解析数据长度</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        test </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">from_bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> byteorder</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;little&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 根据数据长度再次接收数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply2 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">recv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 将接收到的数据的最后8字节删除,最后8字节的内容是校验和、end_flag</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        reply3 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> reply2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 反序列化reply3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reply3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ParseFromString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">common</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 格式化数据，并转为字典格式</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        message_GetBlockInfoDetailReq </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> protobuf_to_dict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        json_output </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">message_GetBlockInfoDetailReq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> indent</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ensure_ascii</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">False</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 返回json数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> json_output</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="二十、获取交易失败列表请求（gettxfailurelistreq）"></a>二十、获取交易失败列表请求（GetTxFailureListReq）<a class="hash-link" href="#二十、获取交易失败列表请求（gettxfailurelistreq）" title="Direct link to heading">#</a></h5><ol><li><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">message GetTxFailureListReq </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string addr = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string txhash = 3; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint32 count = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">addr</td><td align="center">查询地址</td></tr><tr><td align="center">txhash</td><td align="center">该hash的下一个为起始交易,第一次使用时，使用空字符串</td></tr><tr><td align="center">count</td><td align="center">查询数量</td></tr></tbody></table></li><li><p>响应</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> message GetTxFailureListAck</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     string version = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     int32 code = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     string description = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     uint32 total = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     repeated TxFailureItem list = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     string lasthash = 6;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> message TxFailureItem</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     string txHash = 1;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     repeated string vins = 2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     repeated string fromaddr = 3;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     repeated string toaddr = 4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     string amount = 5;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     uint64 time  = 6;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     string detail = 7;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     string gas = 8;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     repeated string toAmount = 9;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     TxType type = 10;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th align="center">字段</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">version</td><td align="center">版本号</td></tr><tr><td align="center">code</td><td align="center">返回错误码 0 成功; -1 地址为空; -2 失败列表信息为空; -3 索引越界; -4 没有找到哈希;</td></tr><tr><td align="center">description</td><td align="center">返回错误信息</td></tr><tr><td align="center">total</td><td align="center">失败列表条目总数量</td></tr><tr><td align="center">list</td><td align="center">失败信息列表</td></tr><tr><td align="center">lashhash</td><td align="center">最后一个交易哈希</td></tr><tr><td align="center">txHash</td><td align="center">交易哈希</td></tr><tr><td align="center">vins</td><td align="center">vins</td></tr><tr><td align="center">fromaddr</td><td align="center">发起地址</td></tr><tr><td align="center">toaddr</td><td align="center">接收地址</td></tr><tr><td align="center">amount</td><td align="center">金额资产值</td></tr><tr><td align="center">time</td><td align="center">时间戳</td></tr><tr><td align="center">detail</td><td align="center">详情描述</td></tr><tr><td align="center">gas</td><td align="center">签名费</td></tr><tr><td align="center">toAmount</td><td align="center">每账户金额</td></tr><tr><td align="center">type</td><td align="center">交易类型</td></tr></tbody></table></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="jsonrpc接口"></a>jsonrpc接口<a class="hash-link" href="#jsonrpc接口" title="Direct link to heading">#</a></h3><font color="#999AAA">说明：jsonrpc标准为2.0，文档中的数据皆为测试数据，请求方式为 POST 默认端口为11190，可以在配置文件config.json中&quot;http_port&quot;属性中指定端口值</font><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="请求示例"></a>请求示例<a class="hash-link" href="#请求示例" title="Direct link to heading">#</a></h4><p>可使用HTTP工具Postman或者Curl进行访问测试</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="一、postman示例"></a>一、Postman示例<a class="hash-link" href="#一、postman示例" title="Direct link to heading">#</a></h5><p>Postman：新建&quot;Request&quot;--&gt; 选择&quot;POST&quot; --&gt; 输入URL地址，需包含端口号11190（如：192.168.1.51:11190/）--&gt;选择Body,选择Raw选项，输入json请求内容，
如:<font color="#55ff55">{ &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;get_height&quot;, &quot;id&quot;: &quot;1&quot; }</font></p><p>填写完毕后，点击&quot;Send&quot;按钮，服务端响应请求并发回响应内容。</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="二、curl示例"></a>二、Curl示例<a class="hash-link" href="#二、curl示例" title="Direct link to heading">#</a></h5><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Curl: curl -i -X POST -H &quot;Content-Type: application/json; indent=4&quot; -d &#x27;{ &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;get_height&quot;, &quot;id&quot;: &quot;1&quot; }&#x27; 192.168.1.51:11190</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>输入上面内容，即可访问get_height接口</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="接口介绍-1"></a>接口介绍<a class="hash-link" href="#接口介绍-1" title="Direct link to heading">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="一、获取高度（get_height）"></a>一、获取高度（get_height）<a class="hash-link" href="#一、获取高度（get_height）" title="Direct link to heading">#</a></h5><p> 请求参数 </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;method&quot;: &quot;get_height&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>成功返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;result&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;height&quot;: &quot;100&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>失败返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -32601,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;Method not found&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> 字段说明</p><table><thead><tr><th align="center">字段</th><th align="center">类型</th><th align="center">字段说明</th></tr></thead><tbody><tr><td align="center">请求:</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">jsonrpc</td><td align="center">字符串类型</td><td align="center">2.0标准 (相同字段以下不再重复)</td></tr><tr><td align="center">id</td><td align="center">字符串类型</td><td align="center">编号，客户端发送什么，服务端回复相同的编号 (相同字段以下不再重复)</td></tr><tr><td align="center">method</td><td align="center">字符串类型</td><td align="center">调用的方法名 (相同字段以下不再重复)</td></tr><tr><td align="center">响应:</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">result</td><td align="center">json对象</td><td align="center">调用成功返回的结果信息 (相同字段以下不再重复)</td></tr><tr><td align="center">height</td><td align="center">字符串类型</td><td align="center">区块高度</td></tr><tr><td align="center">error</td><td align="center">json对象</td><td align="center">调用出错返回的结果信息 (相同字段以下不再重复)</td></tr><tr><td align="center">code</td><td align="center">整型</td><td align="center">错误码 (相同字段以下不再重复)</td></tr><tr><td align="center">message</td><td align="center">字符串类型</td><td align="center">错误描述 (相同字段以下不再重复)</td></tr></tbody></table><p>curl示例:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl -i -X POST -H &quot;Content-Type: application/json; indent=4&quot; -d &#x27;{&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;get_height&quot;, &quot;id&quot;: &quot;1&quot; }&#x27; 192.168.1.51:11190</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>python示例:</p><p>获取高度:  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">def get_height():</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;method&quot;: &quot;get_height&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    headers = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Content-Type&quot;: &quot;application/json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    res = requests.post(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        url=domain,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        data=json.dumps(data),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        headers=headers)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    print(res.text)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="二、通过高度获取所有交易hash--get_txids_by_height"></a>二、通过高度获取所有交易hash  (get_txids_by_height)<a class="hash-link" href="#二、通过高度获取所有交易hash--get_txids_by_height" title="Direct link to heading">#</a></h5><p>请求:  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;method&quot;: &quot;get_txids_by_height&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;height&quot;: &quot;1&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>成功返回：   </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;result&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;772298b54a30e8b9e51b677a497369e19c3bc8ad500bf418b968638fd5d2960f&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;6916d3a37128df383326249abfd57fec11fe693ca1b802bb0e0a9293a688c520&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;7744719b0014bf6f733b9a0624a78273e0cf90818dd5fb02b623a0229990cebb&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>失败返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -32602,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;Invalid params&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>请求的高度格式输入错误：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;height is invalid&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>请求的高度超过最高块的高度：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -4,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;height more than block top &quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>字段说明:</p><table><thead><tr><th align="center">字段</th><th align="center">类型</th><th align="center">字段说明</th></tr></thead><tbody><tr><td align="center">请求:</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">params</td><td align="center">json对象</td><td align="center">方法所需要的参数(相同字段以下不再重复)</td></tr><tr><td align="center">height</td><td align="center">字符串类型</td><td align="center">区块高度</td></tr><tr><td align="center">响应:</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">result</td><td align="center">json对象</td><td align="center">当前区块高度所有交易hash组成的json数组</td></tr></tbody></table><p>示例:  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl -i -X POST -H &quot;Content-Type: application/json; indent=4&quot; -d &#x27;{&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;get_txids_by_height&quot;, &quot;params&quot;: {&quot;height&quot;: &quot;1&quot;} }&#x27; 192.168.1.51:11190</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>python示例:</p><p>通过高度获取所有交易hash<br>
接口：def get_txids_by_height()</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    height = input(&quot;请输入要查询的高度:&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;method&quot;: &quot;get_txids_by_height&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;height&quot;: height</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    headers = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Content-Type&quot;: &quot;application/json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    res = requests.post(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        url=domain,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        data=json.dumps(data),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        headers=headers)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    print(res.text)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="三、根据地址获取余额（get_balance）"></a>三、根据地址获取余额（get_balance）<a class="hash-link" href="#三、根据地址获取余额（get_balance）" title="Direct link to heading">#</a></h5><p> 请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;method&quot;: &quot;get_balance&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;address&quot;: &quot;1BuFpDmH2bJhqxQoyv8cC8YL3mU2TnUDES&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>成功返回：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;result&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;balance&quot;: &quot;888.666668&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>失败返回：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -32602,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;Invalid params&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>查询地址格式输入错误：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;address is invalid &quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>字段说明</p><table><thead><tr><th align="center">字段</th><th align="center">类型</th><th align="center">字段说明</th></tr></thead><tbody><tr><td align="center">请求:</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">address</td><td align="center">字符串类型</td><td align="center">钱包地址</td></tr><tr><td align="center">响应:</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">balance</td><td align="center">字符串类型</td><td align="center">钱包余额</td></tr></tbody></table><p>示例:  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl -i -X POST -H &quot;Content-Type: application/json; indent=4&quot; -d &#x27;{&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;id&quot;: &quot;1&quot;, &quot;method&quot;: &quot;get_balance&quot;, &quot;params&quot;: { &quot;address&quot;:&quot;1BuFpDmH2bJhqxQoyv8cC8YL3mU2TnUDES&quot; } }&#x27; 192.168.1.51:11190</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>python示例</p><p>根据地址获取余额（get_balance）<br>
接口：def get_balance()</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> address = input(&quot;请输入要查询的地址:&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> data = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     &quot;method&quot;: &quot;get_balance&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     &quot;address&quot;: address</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> headers = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     &quot;Content-Type&quot;: &quot;application/json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> res = requests.post(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     url=domain,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     data=json.dumps(data),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     headers=headers)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> print(res.text)  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="四、根据交易hash获取交易详情--get_tx_by_txid"></a>四、根据交易hash获取交易详情  (get_tx_by_txid)<a class="hash-link" href="#四、根据交易hash获取交易详情--get_tx_by_txid" title="Direct link to heading">#</a></h5><p>请求:  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;method&quot;: &quot;get_tx_by_txid&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;hash&quot;: &quot;3bb0c305a59c45a35eb48fef3ac5a9f42104a083288b867572fa07b9a7961baa&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>成功返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;result&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;hash&quot;: &quot;3bb0c305a59c45a35eb48fef3ac5a9f42104a083288b867572fa07b9a7961baa&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;time&quot;: 1603854991179495,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;type&quot;: &quot;tx&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;height&quot;: &quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;vin&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;address&quot;: &quot;1BuFpDmH2bJhqxQoyv8cC8YL3mU2TnUDES&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;output_index&quot;: 0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;output_value&quot;: &quot;1000.000000&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;prev_hash&quot;: &quot;4df2ac157683a5553503731aa74495c556f46faf11c595b95ee5980f8b5013b0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;vout&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;address&quot;: &quot;1FoQKZdUNeBXV2nTba6e354m5JrQ4rHYgA&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;value&quot;: &quot;10.000000&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;address&quot;: &quot;1BuFpDmH2bJhqxQoyv8cC8YL3mU2TnUDES&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;value&quot;: &quot;989.000000&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>没有查找到该笔交易返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -32000,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;not find&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>参数错误返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -32602,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;Invalid params&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>哈希长度不等于64：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;hash is invalid&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>字段说明</p><table><thead><tr><th align="center">字段</th><th align="center">类型</th><th align="center">字段说明</th></tr></thead><tbody><tr><td align="center">请求:</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">hash</td><td align="center">字符串类型</td><td align="center">交易hash</td></tr><tr><td align="center">响应:</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">hash</td><td align="center">字符串类型</td><td align="center">交易hash</td></tr><tr><td align="center">time</td><td align="center">无符号64位整型</td><td align="center">时间戳</td></tr><tr><td align="center">type</td><td align="center">字符串类型</td><td align="center">交易的类型,有三种类型,只需要处理正常交易类型: &quot;tx&quot;正常交易;&quot;pledge&quot;质押交易;&quot;redeem&quot;解质押交易</td></tr><tr><td align="center">height</td><td align="center">字符串类型</td><td align="center">当前交易所在区块高度</td></tr><tr><td align="center">vin</td><td align="center">json数组</td><td align="center">交易输入</td></tr><tr><td align="center">address</td><td align="center">字符串类型</td><td align="center">交易转出地址</td></tr><tr><td align="center">prev_hash</td><td align="center">字符串类型</td><td align="center">utxo所在的交易hash</td></tr><tr><td align="center">output_index</td><td align="center">整型</td><td align="center">索引</td></tr><tr><td align="center">output_value</td><td align="center">字符串类型</td><td align="center">utxo金额</td></tr><tr><td align="center">vout</td><td align="center">json数组</td><td align="center">交易转入地址和金额组成的json对象</td></tr><tr><td align="center">address</td><td align="center">字符串类型</td><td align="center">交易转入地址</td></tr><tr><td align="center">value</td><td align="center">字符串类型</td><td align="center">交易金额</td></tr></tbody></table><p>实际花费的fee计算：vin里的output_value 减去 vout 里的所有value</p><p>示例:  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl -i -X POST -H &quot;Content-Type: application/json; indent=4&quot; -d &#x27;{&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;id&quot;: &quot;1&quot;, &quot;method&quot;: &quot;get_tx_by_txid&quot;, &quot;params&quot;: { &quot;hash&quot;: &quot;3bb0c305a59c45a35eb48fef3ac5a9f42104a083288b867572fa07b9a7961baa&quot; } }&#x27; 192.168.1.51:11190</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>python示例</p><p>根据交易hash获取交易详情  </p><p>接口：def get_tx_by_txid() </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> hash = input(&quot;请输入要查询的交易hash:&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> data = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     &quot;method&quot;: &quot;get_tx_by_txid&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         &quot;hash&quot;: hash</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> }  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> headers = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     &quot;Content-Type&quot;: &quot;application/json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> res = requests.post(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     url=domain,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     data=json.dumps(data),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     headers=headers)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> print(res.text)  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="五、创建交易体--create_tx_message"></a>五、创建交易体  (create_tx_message)<a class="hash-link" href="#五、创建交易体--create_tx_message" title="Direct link to heading">#</a></h5><p>请求   </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;method&quot;: &quot;create_tx_message&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;from_addr&quot;: [&quot;1BuFpDmH2bJhqxQoyv8cC8YL3mU2TnUDES&quot;],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;to_addr&quot;: [{&quot;addr&quot;: &quot;1FoQKZdUNeBXV2nTba6e354m5JrQ4rHYgA&quot;, &quot;value&quot;: &quot;22.222222&quot;}],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;fee&quot;: &quot;0.555555&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>成功返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;result&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;tx_data&quot;: &quot;EM2nvbfKuOwCIiIxQnVGcERtSDJiSmhxeFFveXY4Y0M4WUwzbVUyVG5VREVTMig4ZjU1M2U5ODA4MzM4MjZhMDIxYWQ5MTU4MDA5N2E5OGVkY2EzM2M3QkQKQgpAMDEwZDJmYTBkNzkwNDEzNDlmM2QwZWFmY2FjMzg5ZTQ4NTM1MzgyYzE1M2VmYzNiYWZlZjFjMTcyNjU5ZjU2YUopCI6rzAoSIjFGb1FLWmRVTmVCWFYyblRiYTZlMzU0bTVKclE0ckhZZ0FKKgjY4M+cAxIiMUJ1RnBEbUgyYkpocXhRb3l2OGNDOFlMM21VMlRuVURFU1JDeyJHYXNGZWUiOjU1NTU1NSwiTmVlZFZlcmlmeVByZUhhc2hDb3VudCI6MywiVHJhbnNhY3Rpb25UeXBlIjoidHgifQ==&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;tx_encode_hash&quot;: &quot;3c9a103d8542750dd048eecf2151b052ed26051f201246089bfc01e508ed7000&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>创建交易失败返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -32000,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;create fail,error number:-2&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>参数错误返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -32602,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;Invalid params&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>请求的时候value格式输入错误：(&quot;value&quot;:1.2345678 或者&quot;value&quot;：&quot;abc&quot;等)  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -32602,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;The value is wrong or More than 6 decimal places&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>字段说明</p><table><thead><tr><th align="center">字段</th><th align="center">类型</th><th align="center">字段说明</th></tr></thead><tbody><tr><td align="center">请求:</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">from_addr</td><td align="center">字符串类型</td><td align="center">交易hash</td></tr><tr><td align="center">to_addr</td><td align="center">json数组</td><td align="center">交易转入地址结构</td></tr><tr><td align="center">addr</td><td align="center">字符串类型</td><td align="center">交易转入地址</td></tr><tr><td align="center">value</td><td align="center">字符串类型</td><td align="center">交易金额</td></tr><tr><td align="center">fee</td><td align="center">字符串类型</td><td align="center">交易燃料费</td></tr><tr><td align="center">响应:</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">tx_data</td><td align="center">字符串类型</td><td align="center">交易体(base64编码)</td></tr><tr><td align="center">tx_encode_hash</td><td align="center">字符串类型</td><td align="center">交易体hash(待签名信息)</td></tr></tbody></table><p>示例</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl -i -X POST -H &quot;Content-Type: application/json; indent=4&quot; -d &#x27;{&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;id&quot;: &quot;1&quot;, &quot;method&quot;: &quot;create_tx_message&quot;, &quot;params&quot;: { &quot;from_addr&quot;: [&quot;1BuFpDmH2bJhqxQoyv8cC8YL3mU2TnUDES&quot;], &quot;to_addr&quot;: [{&quot;addr&quot;: &quot;1FoQKZdUNeBXV2nTba6e354m5JrQ4rHYgA&quot;, &quot;value&quot;: &quot;22.222222&quot;}], &quot;fee&quot;: &quot;0.555555&quot;} }&#x27; 192.168.1.51:11190</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>python示例</p><p>通过调用create_tx_message rpc接口，创建交易体数据<br>
接口：def create_tx_message()  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;method&quot;: &quot;create_tx_message&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          &quot;from_addr&quot;: [&quot;1FJpJQkhunjirwjKm85f1P6LcCGnF4Tfet&quot;],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          &quot;to_addr&quot;: [{&quot;addr&quot;: &quot;1McVeDa3cM6A9939wKqLmnuxp863fZXXiC&quot;, &quot;value&quot;: &quot;4.1&quot;}],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          &quot;fee&quot;: &quot;0.1&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  headers = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;Content-Type&quot;: &quot;application/json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  res = requests.post(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      url=domain,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      data=json.dumps(data),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      headers=headers)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  result = json.loads(res.text)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  tx_data = result[&quot;result&quot;][&quot;tx_data&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  tx_encode_hash = result[&quot;result&quot;][&quot;tx_encode_hash&quot;]   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  dict_list = {&#x27;tx_data&#x27;: tx_data,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               &#x27;tx_encode_hash&#x27;: tx_encode_hash}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return_value = json.dumps(dict_list)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return return_value  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="六、发送交易--send_tx"></a>六、发送交易  (send_tx)<a class="hash-link" href="#六、发送交易--send_tx" title="Direct link to heading">#</a></h5><p>请求  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;method&quot;: &quot;send_tx&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;tx_data&quot;: &quot;ELvdqOvRuOwCIiIxQnVGcERtSDJiSmhxeFFveXY4Y0M4WUwzbVUyVG5VREVTMig4ZjU1M2U5ODA4MzM4MjZhMDIxYWQ5MTU4MDA5N2E5OGVkY2EzM2M3QkQKQgpAMjRkMjUxMzMxZGFkYjEyMGMyYmYxMDlhZDI2ODllOWNkMDcwYTAyZWJkZWQxNDA1ZTM5MGFlMmVhMDI0YjEzMEopCI6rzAoSIjFGb1FLWmRVTmVCWFYyblRiYTZlMzU0bTVKclE0ckhZZ0FKKgiwua+GAxIiMUJ1RnBEbUgyYkpocXhRb3l2OGNDOFlMM21VMlRuVURFU1JDeyJHYXNGZWUiOjU1NTU1NSwiTmVlZFZlcmlmeVByZUhhc2hDb3VudCI6MywiVHJhbnNhY3Rpb25UeXBlIjoidHgifQ==&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;tx_signature&quot;: &quot;N1ii0dikr0NJRvi7GXkjXOayD+mVcMfXF+49iOmOneYqYj2HHYzNm3Txj/otW/K7Dh3uBJ2Gb4nlTJW2AY3Dog==&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;public_key&quot;: &quot;ICBszM0aHCpWmDdEC3GMBL6DFN7XdWzijF33uvmWKMa1WbvWBk33+G9E4pSztJWlwDkvEt4dW4oGY8/sY2FJBtPG&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;tx_encode_hash&quot;: &quot;b3b8f15852efddbdfe8aa759a2f026488350b6f56a4cae7494ea3cbba0f8a5c5&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>成功返回值:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;result&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;tx_hash&quot;: &quot;e241d6af1b8f8ff58508f14177005b4263d26e32a2e0d0f6b8e98d966cbaa864&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>验证签名失败返回：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -32000,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;create fail,error number:-8&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>参数错误返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -32602,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;Invalid params&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>字段说明</p><table><thead><tr><th align="center">字段</th><th align="center">类型</th><th align="center">字段说明</th></tr></thead><tbody><tr><td align="center">请求:</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">tx_data</td><td align="center">字符串类型</td><td align="center">交易体(base64编码),创建交易体方法调用后返回的tx_data</td></tr><tr><td align="center">tx_signature</td><td align="center">字符串类型</td><td align="center">对交易体hash(tx_encode_hash)进行签名得到的签名信息,调用动态库</td></tr><tr><td align="center">public_key</td><td align="center">字符串类型</td><td align="center">公钥(base64编码)</td></tr><tr><td align="center">tx_encode_hash</td><td align="center">字符串类型</td><td align="center">交易体hash(待签名信息),创建交易体方法调用后返回的tx_encode_hash</td></tr><tr><td align="center">fee</td><td align="center">字符串类型</td><td align="center">交易燃料费</td></tr><tr><td align="center">响应:</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">tx_hash</td><td align="center">字符串类型</td><td align="center">交易hash(可通过此hash查询完整交易信息)</td></tr></tbody></table><p>tx<em>signature值需要调用文档中的静态库里的GenSign</em>()方法进行签名</p><p>示例</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl -i -X POST -H &quot;Content-Type: application/json; indent=4&quot; -d &#x27;{&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;id&quot;: &quot;1&quot;, &quot;method&quot;: &quot;send_tx&quot;, &quot;params&quot;: { &quot;tx_data&quot;:&quot;ELvdqOvRuOwCIiIxQnVGcERtSDJiSmhxeFFveXY4Y0M4WUwzbVUyVG5VREVTMig4ZjU1M2U5ODA4MzM4MjZhMDIxYWQ5MTU4MDA5N2E5OGVkY2EzM2M3QkQKQgpAMjRkMjUxMzMxZGFkYjEyMGMyYmYxMDlhZDI2ODllOWNkMDcwYTAyZWJkZWQxNDA1ZTM5MGFlMmVhMDI0YjEzMEopCI6rzAoSIjFGb1FLWmRVTmVCWFYyblRiYTZlMzU0bTVKclE0ckhZZ0FKKgiwua+GAxIiMUJ1RnBEbUgyYkpocXhRb3l2OGNDOFlMM21VMlRuVURFU1JDeyJHYXNGZWUiOjU1NTU1NSwiTmVlZFZlcmlmeVByZUhhc2hDb3VudCI6MywiVHJhbnNhY3Rpb25UeXBlIjoidHgifQ==&quot;, &quot;tx_signature&quot;: &quot;N1ii0dikr0NJRvi7GXkjXOayD+mVcMfXF+49iOmOneYqYj2HHYzNm3Txj/otW/K7Dh3uBJ2Gb4nlTJW2AY3Dog==&quot;, &quot;public_key&quot;: &quot;ICBszM0aHCpWmDdEC3GMBL6DFN7XdWzijF33uvmWKMa1WbvWBk33+G9E4pSztJWlwDkvEt4dW4oGY8/sY2FJBtPG&quot;, &quot;tx_encode_hash&quot;: &quot;b3b8f15852efddbdfe8aa759a2f026488350b6f56a4cae7494ea3cbba0f8a5c5&quot;} }&#x27; 192.168.1.51:11190</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>python示例</p><p> 调用send_tx rpc接口发送交易<br>
@param tx_data 创建交易体(create_tx_message)返回的tx_data<br>
@param tx_signature 生成签名信息（generate_sign）返回的message信息<br>
@param public_key 生成钱包地址、公钥和私钥（generate_wallet）返回的public_key<br>
@param tx_encode_hash 创建交易体(create_tx_message)返回的tx_encode_hash  </p><p> 接口： def send_tx(tx_data, tx_signature, public_key, tx_encode_hash)</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  data = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;method&quot;: &quot;send_tx&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;tx_data&quot;: tx_data,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;tx_signature&quot;: tx_signature,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;public_key&quot;: public_key,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;tx_encode_hash&quot;: tx_encode_hash</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   headers = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       &quot;Content-Type&quot;: &quot;application/json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   res = requests.post(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       url=domain,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       data=json.dumps(data),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       headers=headers)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    result = json.loads(res.text)  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="七、获取最近100块高度的平均交易燃料费-（get_avg_fee）"></a>七、获取最近100块高度的平均交易燃料费 （get_avg_fee）<a class="hash-link" href="#七、获取最近100块高度的平均交易燃料费-（get_avg_fee）" title="Direct link to heading">#</a></h5><p>说明：<br>
fee由矿工自主设置，如果发送交易时设置的fee值低于大多数矿工设置的fee值，可能会造成交易不成功，因此，可以参照最近100个高度的区块平均fee值来设定，确保交易能成功。</p><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;method&quot;: &quot;get_avg_fee&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>成功返回：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;result&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;avg_fee&quot;: &quot;0.112074&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>失败返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -32602,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;Invalid params&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>字段说明</p><p>响应：<br>
avg_fee         字符串类型		最近100个高度区块fee的平均值,如果高度不足100,则是所有区块的平均值</p><p>示例</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl -i -X POST -H &quot;Content-Type: application/json; indent=4&quot; -d &#x27;{&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;get_avg_fee&quot;, &quot;id&quot;: &quot;1&quot; }&#x27; 192.168.1.51:11190</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>python示例</p><p>获取最近100块高度的平均交易燃料费   </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">def get_avg_fee():</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;method&quot;: &quot;get_avg_fee&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    headers = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Content-Type&quot;: &quot;application/json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    res = requests.post(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        url=domain,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        data=json.dumps(data),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        headers=headers)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    print(res.text)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="八、生成钱包地址、公钥和私钥（generate_wallet）"></a>八、生成钱包地址、公钥和私钥（generate_wallet）<a class="hash-link" href="#八、生成钱包地址、公钥和私钥（generate_wallet）" title="Direct link to heading">#</a></h5><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;method&quot;: &quot;generate_wallet&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>成功返回：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;result&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;address&quot;: &quot;1BGmh7NgY7spKRBHJkwQTZosaHGiXfynvj&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;private_key&quot;: &quot;xAEF+gTQZ6PmtH3hlmygJpAVxBpKHBa3Zw8iMxRjlbQ=&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;public_key&quot;: &quot;ICD6bienPIel1KE4WmGlQ6bC6M+HiPTw3+et036AUaTVtLr1iV1DMFFx2O9VYi/MUXOZyKK87s/GjPE+eN9A+wEl&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>失败返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       &quot;code&quot;: -32601,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       &quot;message&quot;: &quot;Method not found&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;id&quot;: &quot;&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>字段说明</p><table><thead><tr><th align="center">字段</th><th align="center">类型</th><th align="center">字段说明</th></tr></thead><tbody><tr><td align="center">响应:</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">address</td><td align="center">字符串类型</td><td align="center">钱包地址</td></tr><tr><td align="center">private_key</td><td align="center">字符串类型</td><td align="center">base64编码后的私钥</td></tr><tr><td align="center">public_key</td><td align="center">字符串类型</td><td align="center">base64编码后的公钥</td></tr></tbody></table><p>示例:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl -i -X POST -H &quot;Content-Type: application/json; indent=4&quot; -d &#x27;{&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;generate_wallet&quot;, &quot;id&quot;: &quot;1&quot; }&#x27; 192.168.1.51:11190</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>python示例:<br>
通过调用generate_wallet rpc接口，生成钱包地址和相应的公私钥   </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">def generate_wallet():  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;method&quot;: &quot;generate_wallet&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    headers = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Content-Type&quot;: &quot;application/json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    res = requests.post(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        url=domain,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        data=json.dumps(data),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        headers=headers)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    result = json.loads(res.text)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    address = result[&quot;result&quot;][&quot;address&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    private_key = result[&quot;result&quot;][&quot;private_key&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public_key = result[&quot;result&quot;][&quot;public_key&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dict_list = {&#x27;address&#x27;: address,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                 &#x27;private_key&#x27;: private_key, &#x27;public_key&#x27;: public_key}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return_value = json.dumps(dict_list)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return return_value</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="九、生成签名信息（generate_sign）"></a>九、生成签名信息（generate_sign）<a class="hash-link" href="#九、生成签名信息（generate_sign）" title="Direct link to heading">#</a></h5><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;method&quot;: &quot;generate_sign&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;data&quot;: &quot;b3b8f15852efddbdfe8aa759a2f026488350b6f56a4cae7494ea3cbba0f8a5c5&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;private_key&quot;: &quot;xAEF+gTQZ6PmtH3hlmygJpAVxBpKHBa3Zw8iMxRjlbQ=&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>成功返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;result&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;Ggy2ouJDIZw9/ShvZUwXyVgsAXSFLsxvRCh42elAf+Klit6DJH/jUY6Z3Km/W7VhPKinrsHcaEcwYqIUIwopWQ==&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>失败返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       &quot;code&quot;: -32602,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       &quot;message&quot;: &quot;Invalid params&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>字段说明</p><table><thead><tr><th align="center">字段</th><th align="center">类型</th><th align="center">字段说明</th></tr></thead><tbody><tr><td align="center">请求：</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">data</td><td align="center">字符串类型</td><td align="center">待签名信息, create_tx_message方法调用后返回的tx_encode_hash</td></tr><tr><td align="center">private_key</td><td align="center">字符串类型</td><td align="center">base64编码后的私钥</td></tr><tr><td align="center">响应：</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">message</td><td align="center">字符串类型</td><td align="center">base64编码后的已签名信息</td></tr></tbody></table><p>示例</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl -i -X POST -H &quot;Content-Type: application/json; indent=4&quot; -d &#x27;{&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;generate_sign&quot;, &quot;id&quot;: &quot;1&quot;, &quot;params&quot;: { &quot;data&quot;: &quot;b3b8f15852efddbdfe8aa759a2f026488350b6f56a4cae7494ea3cbba0f8a5c5&quot;, &quot;private_key&quot;: &quot;xAEF+gTQZ6PmtH3hlmygJpAVxBpKHBa3Zw8iMxRjlbQ=&quot; } }&#x27; 192.168.1.51:11190</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>python示例</p><p> 调用generate_sign rpc接口进行签名<br>
@param tx_encode_hash 创建交易体(create_tx_message)返回的tx_encode_hash<br>
@param private_key 生成钱包地址、公钥和私钥(generate_wallet)返回的private_key  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">def generate_sign(tx_encode_hash, private_key):</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;method&quot;: &quot;generate_sign&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;data&quot;: tx_encode_hash,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;private_key&quot;: private_key</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    headers = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Content-Type&quot;: &quot;application/json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    res = requests.post(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        url=domain,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        data=json.dumps(data),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        headers=headers)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    result = json.loads(res.text)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    //获取签名之后返回的message*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    message = result[&quot;result&quot;][&quot;message&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    //将message封装成json格式</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dict_list = {&quot;message&quot;: message}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return_value = json.dumps(dict_list)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return return_value</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="十、查询正在挂起的交易（get_pending_transaction）"></a>十、查询正在挂起的交易（get_pending_transaction）<a class="hash-link" href="#十、查询正在挂起的交易（get_pending_transaction）" title="Direct link to heading">#</a></h5><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;method&quot;: &quot;get_pending_transaction&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;address&quot;: &quot;1MpeeKXwH1ArnMJ85D161yfH1us471J86X&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>成功返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;result&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;total&quot;: 1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;transaction&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;amount&quot;: &quot;501&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;broadstamp&quot;: 1620378873518030,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;from&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;1MpeeKXwH1ArnMJ85D161yfH1us471J86X&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;gap&quot;: &quot;0.050000&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;hash&quot;: &quot;4303e57195616797f77d7db888ef15d677740d8f10a9a8e29370d35c3cc853fb&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;timestamp&quot;: 1620378873279899,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;to&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;1HjrxHbBuuyNQDwKMh4JtqfuGiDCLodEwC&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;toAmount&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;501.000000&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;vin&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;7d9a0cb698db789b5f294343209b94ca69119f02593cb5607069623810f6ed69&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;92c45d62b86d37c04f5f873eedfdcb1719eeca9a43e16b206e98101d20baeb0c&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;d2c9da85e7b67188c507f40a95cba88c491afca56b863cce6af512638c7b1b1c&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>失败返回如请求的地址格式输入错误：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;address is invalid&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>字段说明</p><table><thead><tr><th align="center">字段</th><th align="center">类型</th><th align="center">字段说明</th></tr></thead><tbody><tr><td align="center">请求：</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">address</td><td align="center">字符串类型</td><td align="center">交易发起方地址</td></tr><tr><td align="center">响应：</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">total</td><td align="center">数值类型</td><td align="center">处于挂起的交易的个数</td></tr><tr><td align="center">transaction</td><td align="center">数组类型</td><td align="center">交易内容,包括交易的哈希，发起方，接收方，金额，时间戳</td></tr></tbody></table><p>示例</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl -i -X POST -H &quot;Content-Type: application/json; indent=4&quot; -d &#x27;{&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;get_pending_transaction&quot;, &quot;id&quot;: &quot;1&quot;, &quot;params&quot;: { &quot;address&quot;: &quot;1MpeeKXwH1ArnMJ85D161yfH1us471J86X&quot;} }&#x27; 192.168.1.51:11190</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>python示例</p><p>查询正在挂起的交易
接口：def get_pending_transaction()  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    address = input(&quot;请输入要查询的地址:&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;method&quot;: &quot;get_pending_transaction&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;address&quot;: address</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    headers = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Content-Type&quot;: &quot;application/json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    res = requests.post(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        url=domain,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        data=json.dumps(data),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        headers=headers)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    print(res.text)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="十一、查询失败的交易（get_failure_transaction）"></a>十一、查询失败的交易（get_failure_transaction）<a class="hash-link" href="#十一、查询失败的交易（get_failure_transaction）" title="Direct link to heading">#</a></h5><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;method&quot;: &quot;get_failure_transaction&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;address&quot;: &quot;1MpeeKXwH1ArnMJ85D161yfH1us471J86X&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>成功返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;result&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;total&quot;: 1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;transaction&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;amount&quot;: &quot;500&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;from&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;1MpeeKXwH1ArnMJ85D161yfH1us471J86X&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;gap&quot;: &quot;0.050000&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;hash&quot;: &quot;13f9730d0ce5fe401352f42fdce3677e324d15518857c02e0aafc6b5456a7676&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;timestamp&quot;: 1609313648455902,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;to&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;1HjrxHbBuuyNQDwKMh4JtqfuGiDCLodEwC&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;toAmount&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;500.000000&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;vin&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;b8930d79b8ecbdd2141d3b4fa85fa7dc0e4c6b3c3e30a379d573aacd34299b18&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;c99ac37f9a9c591e51ea31551455f3662eac4e54a1c27923a81e7966c0eadbfa&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;08cb13dea1510860de5549a71c8142e16af6698b9b0d9bea3a813789727d084f&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>返回失败</p><p>请求的地址格式输入错误：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;address isinvalid&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>字段说明</p><table><thead><tr><th align="center">字段</th><th align="center">类型</th><th align="center">字段说明</th></tr></thead><tbody><tr><td align="center">请求：</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">address</td><td align="center">字符串类型</td><td align="center">交易发起方地址</td></tr><tr><td align="center">响应：</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">total</td><td align="center">数值类型</td><td align="center">处于挂起的交易的个数</td></tr><tr><td align="center">transaction</td><td align="center">数组类型</td><td align="center">交易内容,包括交易的哈希，发起方，接收方，金额，时间戳</td></tr></tbody></table><p>示例</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl -i -X POST -H &quot;Content-Type: application/json; indent=4&quot; -d &#x27;{&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;get_failure_transaction&quot;, &quot;id&quot;: &quot;1&quot;, &quot;params&quot;: { &quot;address&quot;: &quot;1MpeeKXwH1ArnMJ85D161yfH1us471J86X&quot;} }&#x27; 192.168.1.51:11190</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>python示例</p><p>查询失败的交易  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">def get_failure_transaction():</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    address = input(&quot;请输入要查询的地址:&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;method&quot;: &quot;get_failure_transaction&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;address&quot;: address</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    headers = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Content-Type&quot;: &quot;application/json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    res = requests.post(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        url=domain,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        data=json.dumps(data),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        headers=headers)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    result = json.loads(res.text)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="十二、获取块信息列表（get_block_info_list）"></a>十二、获取块信息列表（get_block_info_list）<a class="hash-link" href="#十二、获取块信息列表（get_block_info_list）" title="Direct link to heading">#</a></h5><p>请求</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;method&quot;: &quot;get_block_info_list&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;index&quot;: &quot;15&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;count&quot;: &quot;3&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;type&quot;: &quot;0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>成功返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;result&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;height&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;block_hash&quot;: &quot;b4f74ea3a735a0e6de5c4041bbecfc1b6e2a30156ad41ade7e98c9992e3141ec&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;block_height&quot;: 15,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;block_time&quot;: 1611132153984580,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;tx&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        &quot;amount&quot;: &quot;3099.000000&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        &quot;from&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            &quot;1vkS46QffeM4sDMBBjuJBiVkMQKY7Z8Tu&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        &quot;hash&quot;: &quot;b9b417999b0e4d165d822e9fa9c8fdc553fdd9d6affb054d0a258f6d3db352ee&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        &quot;to&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            &quot;1MpeeKXwH1ArnMJ85D161yfH1us471J86X&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;block_hash&quot;: &quot;9870c60872e171b747f35e2f4e876e0792833cb8a258151e38aa1c7f72a52734&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;block_height&quot;: 14,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;block_time&quot;: 1611131849651811,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;tx&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        &quot;amount&quot;: &quot;3983.000000&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        &quot;from&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            &quot;1vkS46QffeM4sDMBBjuJBiVkMQKY7Z8Tu&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        &quot;hash&quot;: &quot;98a483aa1c0b77fed0b69c36888fe6e953fe96d5432a17704e76e4f5a5bc2d64&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        &quot;to&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            &quot;1TT8sdzyPhqSmSx7Wdmn1ECeEHZKosh6v&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;block_hash&quot;: &quot;e79fb3d28be54e12a7e5ae9c21d91cefc6ba0d8f25681717d07348b569083f3f&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;block_height&quot;: 13,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;block_time&quot;: 1611050624949290,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;tx&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        &quot;amount&quot;: &quot;2349.000000&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        &quot;from&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            &quot;1vkS46QffeM4sDMBBjuJBiVkMQKY7Z8Tu&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        &quot;hash&quot;: &quot;bfe2bf795003c2960d09ad03b1d9dd5bc2109c3eba3fe790fd2001f43ce1fc8b&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        &quot;to&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            &quot;1MpeeKXwH1ArnMJ85D161yfH1us471J86X&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>失败返回<br>
请求端输入的index格式出错：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -32602,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;index Invalid params&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>请求端输入的count格式出错：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -32602,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;count Invalid params&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>请求端输入的count不能为0：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;count is not equal zero！&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>请求端输入的type格式出错：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -32602,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;type Invalid params&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>字段说明</p><table><thead><tr><th align="center">字段</th><th align="center">类型</th><th align="center">字段说明</th></tr></thead><tbody><tr><td align="center">请求：</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">index</td><td align="center">数值类型</td><td align="center">块最高起始索引地址。可以指定0，从当前最高块读取</td></tr><tr><td align="center">count</td><td align="center">数值类型</td><td align="center">要读取的块的个数，从高向低列出</td></tr><tr><td align="center">type</td><td align="center">数值类型</td><td align="center">默认为0，以后扩展使用</td></tr><tr><td align="center">响应：</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">height</td><td align="center">数组类型</td><td align="center">每一高度层的块数据</td></tr><tr><td align="center">block_hash</td><td align="center">字符串类型</td><td align="center">块的哈希</td></tr><tr><td align="center">block_height</td><td align="center">数值类型</td><td align="center">块所在的高度</td></tr><tr><td align="center">block_time</td><td align="center">数值类型</td><td align="center">建块的时间</td></tr><tr><td align="center">amount</td><td align="center">字符串类型</td><td align="center">交易金额</td></tr><tr><td align="center">from</td><td align="center">数组类型</td><td align="center">交易发起者</td></tr><tr><td align="center">hash</td><td align="center">字符串类型</td><td align="center">交易哈希</td></tr><tr><td align="center">to</td><td align="center">数组类型</td><td align="center">交易接收者</td></tr></tbody></table><p>示例</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl -i -X POST -H &quot;Content-Type: application/json; indent=4&quot; -d &#x27;{&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;get_block_info_list&quot;, &quot;id&quot;: &quot;1&quot;, &quot;params&quot;: { &quot;index&quot;: &quot;15&quot;, &quot;count&quot;: &quot;3&quot;, &quot;type&quot;:&quot;0&quot; } }&#x27; 192.168.1.51:11190</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>python示例</p><p>获取块信息列表<br>
接口：def get_block_info_list()  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    data = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;method&quot;: &quot;get_block_info_list&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;index&quot;: &quot;15&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;count&quot;: &quot;3&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;type&quot;: &quot;0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    headers = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Content-Type&quot;: &quot;application/json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    res = requests.post(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        url=domain,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        data=json.dumps(data),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        headers=headers)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    print(&quot;get_block_info_list res.text:&quot;, res.text)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    result = json.loads(res.text)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="十三、确认交易是否成功（confirm_transaction）"></a>十三、确认交易是否成功（confirm_transaction）<a class="hash-link" href="#十三、确认交易是否成功（confirm_transaction）" title="Direct link to heading">#</a></h5><p>请求：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;method&quot;: &quot;confirm_transaction&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;tx_hash&quot;: &quot;d7ef410796ffa9ef60982c3470f5d816c28a4ea2d3c5299228ef2f5997bf8221&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>成功返回：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;result&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;nodeid&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;d0b206ec2cee4c04b614d7dc4f9b83584269acd8&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;c0f710f6b70588bd92983bf50ac710d94f913141&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;8e41e25eb4ee88a52c34f159d33ada701ce68469&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;5addc8e04079cc00c49754833b81f67b9458cff5&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;797a07e6ff413bb35c75243efa087fdc714e0a7d&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;bc37516cdea7acf3938049219698b9d7db493eba&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;003f2d85999a6ad668e66dc7cf1ec20dfc1aa9c0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;success&quot;: 1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;total&quot;: 7</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>失败返回：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;result&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;nodeid&quot;: null,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;success&quot;: 0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;total&quot;: 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>tx_hash参数格式错误：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -32700,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;Parse error&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>字段说明</p><table><thead><tr><th align="center">字段</th><th align="center">类型</th><th align="center">字段说明</th></tr></thead><tbody><tr><td align="center">请求：</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">tx_hash</td><td align="center">字符串类型</td><td align="center">本次交易的交易哈希</td></tr><tr><td align="center">响应：</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">nodeid</td><td align="center">数组类型</td><td align="center">返回成功建块的节点ID</td></tr><tr><td align="center">total</td><td align="center">数值类型</td><td align="center">成功本次交易节点确认之后返回的个数</td></tr><tr><td align="center">success</td><td align="center">布尔类型</td><td align="center">成功与否</td></tr></tbody></table><p>示例</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl -i -X POST -H &quot;Content-Type: application/json; indent=4&quot; -d &#x27;{&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;confirm_transaction&quot;, &quot;id&quot;: &quot;1&quot;, &quot;params&quot;: { &quot;tx_hash&quot;: &quot;d7ef410796ffa9ef60982c3470f5d816c28a4ea2d3c5299228ef2f5997bf8221&quot;} }&#x27; 192.168.1.51:11190</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="十四、根据交易哈希和节点id获取交易详情（get_tx_by_txid_and_nodeid）"></a>十四、根据交易哈希和节点ID获取交易详情（get_tx_by_txid_and_nodeid）<a class="hash-link" href="#十四、根据交易哈希和节点id获取交易详情（get_tx_by_txid_and_nodeid）" title="Direct link to heading">#</a></h5><p>请求:  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;method&quot;: &quot;get_tx_by_txid&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;params&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;hash&quot;: &quot;3bb0c305a59c45a35eb48fef3ac5a9f42104a083288b867572fa07b9a7961baa&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;nodeid&quot;:&quot;d0b206ec2cee4c04b614d7dc4f9b83584269acd8&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>成功返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;result&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;hash&quot;: &quot;3bb0c305a59c45a35eb48fef3ac5a9f42104a083288b867572fa07b9a7961baa&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;time&quot;: 1603854991179495,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;type&quot;: &quot;tx&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;height&quot;: &quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;vin&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;address&quot;: &quot;1BuFpDmH2bJhqxQoyv8cC8YL3mU2TnUDES&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;output_index&quot;: 0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;output_value&quot;: &quot;1000.000000&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;prev_hash&quot;: &quot;4df2ac157683a5553503731aa74495c556f46faf11c595b95ee5980f8b5013b0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;vout&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;address&quot;: &quot;1FoQKZdUNeBXV2nTba6e354m5JrQ4rHYgA&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;value&quot;: &quot;10.000000&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;address&quot;: &quot;1BuFpDmH2bJhqxQoyv8cC8YL3mU2TnUDES&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;value&quot;: &quot;989.000000&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>没有查找到该笔交易返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -32000,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;not find&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>参数错误返回：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -32602,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;Invalid params&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>哈希长度不等于64：  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;error&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;code&quot;: -1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;message&quot;: &quot;hash is invalid&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;: &quot;2.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>字段说明</p><table><thead><tr><th align="center">字段</th><th align="center">类型</th><th align="center">字段说明</th></tr></thead><tbody><tr><td align="center">请求：</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">hash</td><td align="center">字符串类型</td><td align="center">交易hash</td></tr><tr><td align="center">响应：</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">hash</td><td align="center">字符串类型</td><td align="center">交易hash</td></tr><tr><td align="center">time</td><td align="center">无符号64位整型</td><td align="center">时间戳</td></tr><tr><td align="center">type</td><td align="center">字符串类型</td><td align="center">交易的类型,有三种类型,只需要处理正常交易类型：&quot;tx&quot;正常交易；&quot;pledge&quot; 质押交易；&quot;redeem&quot; 解质押交易</td></tr><tr><td align="center">height</td><td align="center">字符串类型</td><td align="center">当前交易所在区块高度</td></tr><tr><td align="center">vin</td><td align="center">json数组</td><td align="center">交易输入</td></tr><tr><td align="center">address</td><td align="center">字符串类型</td><td align="center">交易转出地址</td></tr><tr><td align="center">prev_hash</td><td align="center">字符串类型</td><td align="center">utxo所在的交易hash</td></tr><tr><td align="center">output_index</td><td align="center">整型</td><td align="center">索引</td></tr><tr><td align="center">output_value</td><td align="center">字符串类型</td><td align="center">utxo金额</td></tr><tr><td align="center">vout</td><td align="center">json数组</td><td align="center">交易转入地址和金额组成的json对象</td></tr><tr><td align="center">address</td><td align="center">字符串类型</td><td align="center">交易转入地址</td></tr><tr><td align="center">value</td><td align="center">字符串类型</td><td align="center">交易金额</td></tr></tbody></table><p>实际花费的fee计算：vin里的output_value 减去 vout 里的所有value</p><p>示例:  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl -i -X POST -H &quot;Content-Type: application/json; indent=4&quot; -d &#x27;{&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;id&quot;: &quot;1&quot;, &quot;method&quot;: &quot;get_tx_by_txid_and_nodeid&quot;, &quot;params&quot;: { &quot;hash&quot;: &quot;3bb0c305a59c45a35eb48fef3ac5a9f42104a083288b867572fa07b9a7961baa&quot;,&quot;nodeid&quot;:&quot;d0b206ec2cee4c04b614d7dc4f9b83584269acd8&quot; } }&#x27; 192.168.1.51:11190</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/开发者/UENC开发者"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« UENC开发者</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/钱包/Fastoken钱包"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Fastoken钱包 »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#protobuf接口" class="table-of-contents__link">Protobuf接口</a></li><li><a href="#jsonrpc接口" class="table-of-contents__link">jsonrpc接口</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2015 - 2021 UENC.All Rights Reserved UENC</div></div></div></footer></div>
<script src="/assets/js/runtime~main.809ca3ce.js"></script>
<script src="/assets/js/main.49f51e15.js"></script>
</body>
</html>