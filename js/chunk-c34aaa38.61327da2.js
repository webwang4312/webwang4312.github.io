(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c34aaa38"],{2362:function(t,e,s){},3086:function(t,e,s){},"46bc":function(t,e,s){"use strict";s("3086")},9452:function(t,e,s){"use strict";s("2362")},fc08:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Proposal"},[a("div",{staticClass:"search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.searchForm}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{staticClass:"title_bn",staticStyle:{width:"320px"},attrs:{placeholder:t.$t("Proposal.title")},model:{value:t.searchForm.title,callback:function(e){t.$set(t.searchForm,"title",e)},expression:"searchForm.title"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-select",{staticClass:"status_bn",staticStyle:{width:"320px"},attrs:{placeholder:t.$t("Vote.State"),clearable:""},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},t._l(t.statusList,(function(t){return a("el-option",{key:t.dictValue,staticClass:"statusItem",attrs:{label:t.dictLabel,value:t.dictValue}})})),1)],1),a("el-form-item",[a("span",{staticClass:"btn",on:{click:t.search}},[t._v(t._s(t.$t("Proposal.Search")))])])],1)],1),t.proposalList.length>0?a("div",{staticClass:"content"},[a("div",{staticClass:"w1300"},[t._l(t.proposalList,(function(e){return[a("div",{key:e.id,staticClass:"details"},[a("div",{staticClass:"head"},[a("div",{staticClass:"num",on:{click:function(s){return t.details(e.id)}}},[t._v(t._s(e.id))]),a("div",{staticClass:"cen",on:{click:function(s){return t.details(e.id)}}},[a("div",{staticClass:"title"},[t._v(t._s(e.title))]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"people"},[t._v(t._s(t.$t("Proposal.Proposer"))+":"+t._s(e.name))]),a("div",{staticClass:"status"},[t._v("\n                  "+t._s(t.$t("Proposal.status"))+" ："+t._s(t.getStatus(e.status))+"\n                ")])])])]),a("div",{staticClass:"text",domProps:{innerHTML:t._s(e.summary)}},[t._v(t._s(e.summary))]),a("div",{staticClass:"votes"},[a("div",{staticClass:"num"},[a("span",[t._v(t._s(e.approve))]),a("span",{staticClass:"r"},[t._v(t._s(e.oppose))])]),a("div",{staticClass:"meddile"},[a("div",{staticClass:"approve",style:"width: "+(e.approve?(Number(e.approve)/(e.approve+Number(e.oppose))*100).toFixed(2):0==e.approve&&0==e.oppose?50:0)+"%"}),0==e.approve&&e.oppose>0||e.approve>0&&0==e.oppose?t._e():a("div",{staticClass:"c"},[a("span",{staticClass:"iconfont iconlan"}),a("span",{staticClass:"iconfont iconhong"})]),a("div",{staticClass:"oppose",style:" width: "+(e.oppose?(e.oppose/(Number(e.approve)+Number(e.oppose))*100).toFixed(2):0==e.approve&&0==e.oppose?50:0)+"%"})]),a("div",{staticClass:"foot"},[a("div",{on:{click:function(s){return t.isPoll(1,e)}}},[t._v("\n                "+t._s(1===e.userPollStatus?t.$t("Proposal.agreea"):t.$t("Proposal.agree"))+"\n                "),a("img",{attrs:{src:s("8cbf"),alt:""}})]),a("div",{staticClass:"r",on:{click:function(s){return t.isPoll(2,e)}}},[t._v("\n                "+t._s(2===e.userPollStatus?t.$t("Proposal.opposea"):t.$t("Proposal.oppose"))),a("img",{attrs:{src:s("ab1a"),alt:""}})])])])])]}))],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":t.searchForm.pageNo,"page-sizes":[5,10,15,20],"page-size":t.searchForm.pageSize,layout:"total, prev, pager, next, jumper",total:t.total,background:""},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]):a("div",{staticClass:"nodata"},[t._v("\n    "+t._s("cn"===t.$t("index.switch")?"暂无数据":"Empty data")+"\n  ")]),a("el-dialog",{attrs:{"custom-class":"vote-dialog",title:t.$t("dialog.Number"),visible:t.dialogVisible,width:"600px","before-close":t.close}},[a("el-input",{attrs:{placeholder:t.$t("dialog.less")},model:{value:t.numPoll,callback:function(e){t.numPoll=e},expression:"numPoll"}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"dialog-btn",on:{click:t.getPoll}},[t._v(t._s(t.$t("dialog.confirm")))]),a("div",{staticClass:"dialog-btn close",on:{click:t.close}},[t._v(t._s(t.$t("dialog.cancel")))])])],1)],1)},i=[],r=(s("ac4d"),s("8a81"),s("5df3"),s("1c4c"),s("7f7f"),s("6b54"),s("a481"),s("ac6a"),s("96cf"),s("1da1")),o=s("6cd7");s("3022");function n(t,e){var s="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!s){if(Array.isArray(t)||(s=l(t))||e&&t&&"number"===typeof t.length){s&&(t=s);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,n=!1;return{s:function(){s=s.call(t)},n:function(){var t=s.next();return o=t.done,t},e:function(t){n=!0,r=t},f:function(){try{o||null==s.return||s.return()}finally{if(n)throw r}}}}function l(t,e){if(t){if("string"===typeof t)return c(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}var u={data:function(){return{statusPoll:"",itemPoll:null,numPoll:"",searchForm:{title:"",status:"",pageNo:1,pageSize:10},statusList:[],currentPage:1,proposalList:[],total:0,dialogVisible:!1,pollNumber:0,poll:!1,exec:!1}},created:function(){var t=localStorage.getItem("username");this.searchForm.loginName=t},mounted:function(){this.getProposalList(),this.getDictList()},methods:{isPoll:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,s){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==s.userPollStatus){t.next=9;break}return this.statusPoll=e,this.itemPoll=s,t.next=5,Object(o["f"])({loginName:this.searchForm.loginName,id:s.id});case 5:a=t.sent,0==a.code&&(this.pollNumber=a.data.pollNumber,this.poll=a.data.poll,this.exec=a.data.exec,this.poll?this.pollNumber/1<1e3?this.$message.error("cn"===this.$t("index.switch")?"余额至少1000以上才可以投票哦！":"Only with a balance of at least 1000 can you vote!"):this.dialogVisible=!0:this.$message.error("cn"===this.$t("index.switch")?"您没有投票权限！":"You do not have the right to vote!")),t.next=10;break;case 9:this.$message.error("cn"===this.$t("index.switch")?"您已参与本次投票!":"You have participated in this poll！");case 10:case"end":return t.stop()}}),t,this)})));function e(e,s){return t.apply(this,arguments)}return e}(),close:function(){this.statusPoll=0,this.dialogVisible=!1,this.itemPoll=null,this.numPoll=""},getPoll:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=localStorage.getItem("username"),"0"==this.itemPoll.userPollStatus){t.next=3;break}return t.abrupt("return",this.$message.warning("cn"===this.$t("index.switch")?"已投票，请勿重复投递！":"Voted, do not repeat!"));case 3:if(!(this.numPoll<1e3)){t.next=5;break}return t.abrupt("return",this.$message.warning("cn"===this.$t("index.switch")?"投票数量不得小于1000":"The number of votes must not be less than 1,000"));case 5:if(!(this.numPoll>this.pollNumber)){t.next=7;break}return t.abrupt("return",this.$message.warning("cn"===this.$t("index.switch")?"可用余额不足":"Insufficient available balance"));case 7:return t.next=9,Object(o["t"])({loginName:e,proposalId:this.itemPoll.id,status:this.statusPoll,num:this.numPoll,mark:this.itemPoll.status});case 9:s=t.sent,0===s.code?(this.$message.success("cn"===this.$t("index.switch")?"投票成功！":"success"),this.getProposalList(),this.close()):this.$message.error(dataList.msg);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getProposalList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["u"])(this.searchForm);case 2:e=t.sent,0===e.code?(e.rows.length||this.$message.warning("cn"===this.$t("index.switch")?"暂无内容":"No content"),e.rows.forEach((function(t){t.summary=t.summary.replace(/\n/g,"<br>")})),this.total=e.total,this.proposalList=e.rows):this.$message.error(e.msg);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getDictList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["o"])({dictType:"sys_poll_status"});case 2:e=t.sent,0===e.code?this.statusList=e.rows:this.$message.error(e.msg);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),search:function(){this.getProposalList()},getStatus:function(t){var e,s="无状态",a=n(this.statusList);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(i.dictValue==t){s=i.dictLabel;break}}}catch(r){a.e(r)}finally{a.f()}return s},details:function(t){this.$router.push({path:"/pc/community/Proposal/Details",query:{id:t,type:"vote",exec:this.exec}})},handleSizeChange:function(t){this.searchForm.pageSize=t,this.getProposalList()},handleCurrentChange:function(t){this.searchForm.pageNo=t,this.getProposalList()}}},p=u,h=(s("9452"),s("46bc"),s("2877")),d=Object(h["a"])(p,a,i,!1,null,"e165025c",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-c34aaa38.61327da2.js.map